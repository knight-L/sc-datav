import{i as e,n as t,s as n,t as r}from"./index-DWyl6JQT.js";import{$ as i,$t as a,A as o,An as s,At as c,B as l,Bt as u,C as d,Cn as f,Cr as p,Ct as m,D as h,Dn as g,Dt as _,En as v,Et as y,Fn as b,H as x,Ht as S,In as C,Ir as w,Jn as T,K as E,Ln as D,Lr as O,Lt as k,M as A,Mn as j,Mr as M,Nn as ee,Nt as te,O as N,On as P,Ot as F,P as ne,Pn as re,Pr as I,Pt as L,Q as R,Qt as z,R as B,Rt as V,S as ie,Sn as ae,Sr as H,St as oe,T as se,Tn as ce,Tr as le,Tt as ue,Un as de,V as fe,Vn as pe,Wt as me,Xn as he,Xt as ge,Y as _e,Yn as ve,Zn as ye,Zt as be,_ as xe,_r as Se,_t as Ce,a as we,an as Te,b as Ee,bt as De,c as Oe,cn as ke,cr as Ae,ct as je,d as Me,dn as Ne,dt as Pe,en as Fe,f as Ie,fn as Le,fr as Re,ft as ze,g as Be,h as Ve,hn as He,hr as Ue,ht as We,i as Ge,j as Ke,jn as qe,jr as Je,jt as Ye,k as Xe,kn as Ze,kt as Qe,l as $e,ln as et,lt as tt,m as nt,mn as rt,mr as it,n as at,nn as ot,nt as st,o as ct,on as lt,ot as ut,pn as dt,pr as ft,pt,qn as mt,r as ht,rn as gt,rr as _t,rt as vt,s as yt,sn as bt,sr as xt,t as St,tt as Ct,u as wt,un as U,ur as Tt,ut as Et,v as Dt,vn as Ot,vr as kt,vt as At,w as jt,wn as Mt,wr as Nt,wt as Pt,x as Ft,xr as It,y as Lt,yr as Rt,yt as zt,zt as Bt}from"./sc_outline-su4EI3LA.js";var W=n(e()),Vt=n(t()),Ht=new M,Ut=new M,Wt=new M,Gt=new Je;function Kt(e,t,n){let r=Ht.setFromMatrixPosition(e.matrixWorld);r.project(t);let i=n.width/2,a=n.height/2;return[r.x*i+i,-(r.y*a)+a]}function qt(e,t){let n=Ht.setFromMatrixPosition(e.matrixWorld),r=Ut.setFromMatrixPosition(t.matrixWorld),i=n.sub(r),a=t.getWorldDirection(Wt);return i.angleTo(a)>Math.PI/2}function Jt(e,t,n,r){let i=Ht.setFromMatrixPosition(e.matrixWorld),a=i.clone();a.project(t),Gt.set(a.x,a.y),n.setFromCamera(Gt,t);let o=n.intersectObjects(r,!0);if(o.length){let e=o[0].distance;return i.distanceTo(n.ray.origin)<e}return!0}function Yt(e,t){if(t instanceof it)return t.zoom;if(t instanceof Ue){let n=Ht.setFromMatrixPosition(e.matrixWorld),r=Ut.setFromMatrixPosition(t.matrixWorld),i=t.fov*Math.PI/180,a=n.distanceTo(r);return 1/(2*Math.tan(i/2)*a)}else return 1}function Xt(e,t,n){if(t instanceof Ue||t instanceof it){let r=Ht.setFromMatrixPosition(e.matrixWorld),i=Ut.setFromMatrixPosition(t.matrixWorld),a=r.distanceTo(i),o=(n[1]-n[0])/(t.far-t.near),s=n[1]-o*t.far;return Math.round(o*a+s)}}var Zt=e=>Math.abs(e)<1e-10?0:e;function Qt(e,t,n=``){let r=`matrix3d(`;for(let n=0;n!==16;n++)r+=Zt(t[n]*e.elements[n])+(n===15?`)`:`,`);return n+r}var $t=(e=>t=>Qt(t,e))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),en=(e=>(t,n)=>Qt(t,e(n),`translate(-50%,-50%)`))(e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1]);function tn(e){return e&&typeof e==`object`&&`current`in e}var nn=W.forwardRef(({children:e,eps:t=.001,style:n,className:r,prepend:i,center:a,fullscreen:o,portal:s,distanceFactor:c,sprite:l=!1,transform:u=!1,occlude:d,onOcclude:f,castShadow:p,receiveShadow:m,material:h,geometry:g,zIndexRange:_=[16777271,0],calculatePosition:v=Kt,as:y=`div`,wrapperClass:b,pointerEvents:x=`auto`,...S},T)=>{let{gl:E,camera:O,scene:k,size:A,raycaster:j,events:ee,viewport:te}=D(),[N]=W.useState(()=>document.createElement(y)),P=W.useRef(null),F=W.useRef(null),ne=W.useRef(0),re=W.useRef([0,0]),I=W.useRef(null),L=W.useRef(null),R=s?.current||ee.connected||E.domElement.parentNode,z=W.useRef(null),B=W.useRef(!1),V=W.useMemo(()=>d&&d!==`blending`||Array.isArray(d)&&d.length&&tn(d[0]),[d]);W.useLayoutEffect(()=>{let e=E.domElement;d&&d===`blending`?(e.style.zIndex=`${Math.floor(_[0]/2)}`,e.style.position=`absolute`,e.style.pointerEvents=`none`):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)},[d]),W.useLayoutEffect(()=>{if(F.current){let e=P.current=Vt.createRoot(N);if(k.updateMatrixWorld(),u)N.style.cssText=`position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;`;else{let e=v(F.current,O,A);N.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return R&&(i?R.prepend(N):R.appendChild(N)),()=>{R&&R.removeChild(N),e.unmount()}}},[R,u]),W.useLayoutEffect(()=>{b&&(N.className=b)},[b]);let ie=W.useMemo(()=>u?{position:`absolute`,top:0,left:0,width:A.width,height:A.height,transformStyle:`preserve-3d`,pointerEvents:`none`}:{position:`absolute`,transform:a?`translate3d(-50%,-50%,0)`:`none`,...o&&{top:-A.height/2,left:-A.width/2,width:A.width,height:A.height},...n},[n,a,o,A,u]),ae=W.useMemo(()=>({position:`absolute`,pointerEvents:x}),[x]);W.useLayoutEffect(()=>{if(B.current=!1,u){var t;(t=P.current)==null||t.render(W.createElement(`div`,{ref:I,style:ie},W.createElement(`div`,{ref:L,style:ae},W.createElement(`div`,{ref:T,className:r,style:n,children:e}))))}else{var i;(i=P.current)==null||i.render(W.createElement(`div`,{ref:T,style:ie,className:r,children:e}))}});let H=W.useRef(!0);C(e=>{if(F.current){O.updateMatrixWorld(),F.current.updateWorldMatrix(!0,!1);let e=u?re.current:v(F.current,O,A);if(u||Math.abs(ne.current-O.zoom)>t||Math.abs(re.current[0]-e[0])>t||Math.abs(re.current[1]-e[1])>t){let t=qt(F.current,O),n=!1;V&&(Array.isArray(d)?n=d.map(e=>e.current):d!==`blending`&&(n=[k]));let r=H.current;n?H.current=Jt(F.current,O,j,n)&&!t:H.current=!t,r!==H.current&&(f?f(!H.current):N.style.display=H.current?`block`:`none`);let i=Math.floor(_[0]/2),a=d?V?[_[0],i]:[i-1,0]:_;if(N.style.zIndex=`${Xt(F.current,O,a)}`,u){let[e,t]=[A.width/2,A.height/2],n=O.projectionMatrix.elements[5]*t,{isOrthographicCamera:r,top:i,left:a,bottom:o,right:s}=O,u=$t(O.matrixWorldInverse),d=r?`scale(${n})translate(${Zt(-(s+a)/2)}px,${Zt((i+o)/2)}px)`:`translateZ(${n}px)`,f=F.current.matrixWorld;l&&(f=O.matrixWorldInverse.clone().transpose().copyPosition(f).scale(F.current.scale),f.elements[3]=f.elements[7]=f.elements[11]=0,f.elements[15]=1),N.style.width=A.width+`px`,N.style.height=A.height+`px`,N.style.perspective=r?``:`${n}px`,I.current&&L.current&&(I.current.style.transform=`${d}${u}translate(${e}px,${t}px)`,L.current.style.transform=en(f,1/((c||10)/400)))}else{let t=c===void 0?1:Yt(F.current,O)*c;N.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${t})`}re.current=e,ne.current=O.zoom}}if(!V&&z.current&&!B.current)if(u){if(I.current){let e=I.current.children[0];if(e!=null&&e.clientWidth&&e!=null&&e.clientHeight){let{isOrthographicCamera:t}=O;if(t||g)S.scale&&(Array.isArray(S.scale)?S.scale instanceof M?z.current.scale.copy(S.scale.clone().divideScalar(1)):z.current.scale.set(1/S.scale[0],1/S.scale[1],1/S.scale[2]):z.current.scale.setScalar(1/S.scale));else{let t=(c||10)/400,n=e.clientWidth*t,r=e.clientHeight*t;z.current.scale.set(n,r,1)}B.current=!0}}}else{let t=N.children[0];if(t!=null&&t.clientWidth&&t!=null&&t.clientHeight){let e=1/te.factor,n=t.clientWidth*e,r=t.clientHeight*e;z.current.scale.set(n,r,1),B.current=!0}z.current.lookAt(e.camera.position)}});let oe=W.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return W.createElement(`group`,w({},S,{ref:F}),d&&!V&&W.createElement(`mesh`,{castShadow:p,receiveShadow:m,ref:z},g||W.createElement(`planeGeometry`,null),h||W.createElement(`shaderMaterial`,{side:2,vertexShader:oe.vertexShader,fragmentShader:oe.fragmentShader})))});function rn(e,t=`pointer`,n=`auto`,r=document.body){W.useEffect(()=>{if(e)return r.style.cursor=t,()=>void(r.style.cursor=n)},[e])}var an=0,on=j(e=>(T.onStart=(t,n,r)=>{e({active:!0,item:t,loaded:n,total:r,progress:(n-an)/(r-an)*100})},T.onLoad=()=>{e({active:!1})},T.onError=t=>e(e=>({errors:[...e.errors,t]})),T.onProgress=(t,n,r)=>{n===r&&(an=r),e({active:!0,item:t,loaded:n,total:r,progress:(n-an)/(r-an)*100||100})},{errors:[],active:!1,progress:0,item:``,loaded:0,total:0})),sn=e=>`Loading ${e.toFixed(2)}%`;function cn({containerStyles:e,innerStyles:t,barStyles:n,dataStyles:r,dataInterpolation:i=sn,initialState:a=e=>e}){let{active:o,progress:s}=on(),c=W.useRef(0),l=W.useRef(0),u=W.useRef(null),[d,f]=W.useState(a(o));W.useEffect(()=>{let e;return o!==d&&(e=setTimeout(()=>f(o),300)),()=>clearTimeout(e)},[d,o]);let p=W.useCallback(()=>{u.current&&(c.current+=(s-c.current)/2,(c.current>.95*s||s===100)&&(c.current=s),u.current.innerText=i(c.current),c.current<s&&(l.current=requestAnimationFrame(p)))},[i,s]);return W.useEffect(()=>(p(),()=>cancelAnimationFrame(l.current)),[p]),d?W.createElement(`div`,{style:{...ln.container,opacity:o?1:0,...e}},W.createElement(`div`,null,W.createElement(`div`,{style:{...ln.inner,...t}},W.createElement(`div`,{style:{...ln.bar,transform:`scaleX(${s/100})`,...n}}),W.createElement(`span`,{ref:u,style:{...ln.data,...r}})))):null}var ln={container:{position:`absolute`,top:0,left:0,width:`100%`,height:`100%`,background:`#171717`,display:`flex`,alignItems:`center`,justifyContent:`center`,transition:`opacity 300ms ease`,zIndex:1e3},inner:{width:100,height:3,background:`#272727`,textAlign:`center`},bar:{height:3,width:`100%`,background:`white`,transition:`transform 200ms`,transformOrigin:`left center`},data:{display:`inline-block`,position:`relative`,fontVariantNumeric:`tabular-nums`,marginTop:`0.8em`,color:`#f0f0f0`,fontSize:`0.6em`,fontFamily:`-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"`,whiteSpace:`nowrap`}},un={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},dn={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},fn=(e,t)=>{e.updateRanges[0]=t},pn=W.forwardRef(({scale:e=10,frames:t=1/0,opacity:n=1,width:r=1,height:i=1,blur:a=1,near:o=0,far:s=10,resolution:c=512,smooth:l=!0,color:u=`#000000`,depthWrite:d=!1,renderOrder:f,...m},h)=>{let g=W.useRef(null),_=D(e=>e.scene),v=D(e=>e.gl),y=W.useRef(null);r*=Array.isArray(e)?e[0]:e||1,i*=Array.isArray(e)?e[1]:e||1;let[b,x,S,T,E,O,k]=W.useMemo(()=>{let e=new I(c,c),t=new I(c,c);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;let n=new Se(r,i).rotateX(Math.PI/2),a=new Ae(n),o=new Tt;o.depthTest=o.depthWrite=!1,o.onBeforeCompile=e=>{e.uniforms={...e.uniforms,ucolor:{value:new mt(u)}},e.fragmentShader=e.fragmentShader.replace(`void main() {`,`uniform vec3 ucolor;
           void main() {
          `),e.fragmentShader=e.fragmentShader.replace(`vec4( vec3( 1.0 - fragCoordZ ), opacity );`,`vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );`)};let s=new p(un),l=new p(dn);return l.depthTest=s.depthTest=!1,[e,n,o,a,s,l,t]},[c,r,i,e,u]),A=e=>{T.visible=!0,T.material=E,E.uniforms.tDiffuse.value=b.texture,E.uniforms.h.value=e*1/256,v.setRenderTarget(k),v.render(T,y.current),T.material=O,O.uniforms.tDiffuse.value=k.texture,O.uniforms.v.value=e*1/256,v.setRenderTarget(b),v.render(T,y.current),T.visible=!1},j=0,M,ee;return C(()=>{y.current&&(t===1/0||j<t)&&(j++,M=_.background,ee=_.overrideMaterial,g.current.visible=!1,_.background=null,_.overrideMaterial=S,v.setRenderTarget(b),v.render(_,y.current),A(a),l&&A(a*.4),v.setRenderTarget(null),g.current.visible=!0,_.overrideMaterial=ee,_.background=M)}),W.useImperativeHandle(h,()=>g.current,[]),W.createElement(`group`,w({"rotation-x":Math.PI/2},m,{ref:g}),W.createElement(`mesh`,{renderOrder:f,geometry:x,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},W.createElement(`meshBasicMaterial`,{transparent:!0,map:b.texture,opacity:n,depthWrite:d})),W.createElement(`orthographicCamera`,{ref:y,args:[-r/2,r/2,i/2,-i/2,o,s]}))}),mn=`https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png`,hn=new xt,gn=new M,_n=new kt,vn=new M,yn=new kt,bn=new M,xn=W.createContext(null),Sn=W.forwardRef(({children:e,material:t=Re,texture:n=mn,range:r,limit:i=200,frustumCulled:a,...o},s)=>{let c=W.useMemo(()=>class extends t{constructor(){super();let e=parseInt(`181`.replace(/\D+/g,``))>=154?`opaque_fragment`:`output_fragment`;this.onBeforeCompile=t=>{t.vertexShader=`attribute float cloudOpacity;
               varying float vOpacity;
              `+t.vertexShader.replace(`#include <fog_vertex>`,`#include <fog_vertex>
                 vOpacity = cloudOpacity;
                `),t.fragmentShader=`varying float vOpacity;
              `+t.fragmentShader.replace(`#include <${e}>`,`#include <${e}>
                 gl_FragColor = vec4(outgoingLight, diffuseColor.a * vOpacity);
                `)}}},[t]);b({CloudMaterial:c});let l=W.useRef(null),u=W.useRef([]),d=W.useMemo(()=>new Float32Array(Array.from({length:i},()=>1)),[i]),f=W.useMemo(()=>new Float32Array(Array.from({length:i},()=>[1,1,1]).flat()),[i]),p=qe(n),m=0,h=0,g,_=new kt,v=new M(0,0,1),y=new M;C((e,t)=>{for(m=e.clock.elapsedTime,hn.copy(l.current.matrixWorld).invert(),e.camera.matrixWorld.decompose(vn,yn,bn),h=0;h<u.current.length;h++)g=u.current[h],g.ref.current.matrixWorld.decompose(gn,_n,bn),gn.add(y.copy(g.position).applyQuaternion(_n).multiply(bn)),_n.copy(yn).multiply(_.setFromAxisAngle(v,g.rotation+=t*g.rotationFactor)),bn.multiplyScalar(g.volume+(1+Math.sin(m*g.density*g.speed))/2*g.growth),g.matrix.compose(gn,_n,bn).premultiply(hn),g.dist=gn.distanceTo(vn);for(u.current.sort((e,t)=>t.dist-e.dist),h=0;h<u.current.length;h++)g=u.current[h],d[h]=g.opacity*(g.dist<g.fade-1?g.dist/g.fade:1),l.current.setMatrixAt(h,g.matrix),l.current.setColorAt(h,g.color);l.current.geometry.attributes.cloudOpacity.needsUpdate=!0,l.current.instanceMatrix.needsUpdate=!0,l.current.instanceColor&&(l.current.instanceColor.needsUpdate=!0)}),W.useLayoutEffect(()=>{let e=Math.min(i,r===void 0?i:r,u.current.length);l.current.count=e,fn(l.current.instanceMatrix,{start:0,count:e*16}),l.current.instanceColor&&fn(l.current.instanceColor,{start:0,count:e*3}),fn(l.current.geometry.attributes.cloudOpacity,{start:0,count:e})});let x=[p.image.width??1,p.image.height??1],S=Math.max(x[0],x[1]);return x=[x[0]/S,x[1]/S],W.createElement(`group`,w({ref:s},o),W.createElement(xn.Provider,{value:u},e,W.createElement(`instancedMesh`,{matrixAutoUpdate:!1,ref:l,args:[null,null,i],frustumCulled:a},W.createElement(`instancedBufferAttribute`,{usage:he,attach:`instanceColor`,args:[f,3]}),W.createElement(`planeGeometry`,{args:[...x]},W.createElement(`instancedBufferAttribute`,{usage:he,attach:`attributes-cloudOpacity`,args:[d,1]})),W.createElement(`cloudMaterial`,{key:t.name,map:p,transparent:!0,depthWrite:!1}))))}),Cn=W.forwardRef(({opacity:e=1,speed:t=0,bounds:n=[5,1,1],segments:r=20,color:i=`#ffffff`,fade:a=10,volume:o=6,smallestVolume:s=.25,distribute:c=null,growth:l=4,concentrate:u=`inside`,seed:d=Math.random(),...f},p)=>{function m(){let e=Math.sin(d++)*1e4;return e-Math.floor(e)}let h=W.useContext(xn),g=W.useRef(null),_=W.useId(),v=W.useMemo(()=>[...Array(r)].map((e,t)=>({segments:r,bounds:new M(1,1,1),position:new M,uuid:_,index:t,ref:g,dist:0,matrix:new xt,color:new mt,rotation:t*(Math.PI/r)})),[r,_]);return W.useLayoutEffect(()=>{v.forEach((d,f)=>{re(d,{volume:o,color:i,speed:t,growth:l,opacity:e,fade:a,bounds:n,density:Math.max(.5,m()),rotationFactor:Math.max(.2,.5*m())*t});let p=c?.(d,f);(p||r>1)&&d.position.copy(d.bounds).multiply(p?.point??{x:m()*2-1,y:m()*2-1,z:m()*2-1});let h=Math.abs(d.position.x),g=Math.abs(d.position.y),_=Math.abs(d.position.z),v=Math.max(h,g,_);d.length=1,h===v&&(d.length-=h/d.bounds.x),g===v&&(d.length-=g/d.bounds.y),_===v&&(d.length-=_/d.bounds.z),d.volume=(p?.volume===void 0?Math.max(Math.max(0,s),u===`random`?m():u===`inside`?d.length:1-d.length):p.volume)*o})},[u,n,a,i,e,l,o,d,r,t]),W.useLayoutEffect(()=>{let e=v;return h.current=[...h.current,...e],()=>{h.current=h.current.filter(e=>e.uuid!==_)}},[v]),W.useImperativeHandle(p,()=>g.current,[]),W.createElement(`group`,w({ref:g},f))}),wn=W.forwardRef((e,t)=>W.useContext(xn)?W.createElement(Cn,w({ref:t},e)):W.createElement(Sn,null,W.createElement(Cn,w({ref:t},e)))),Tn=Math.PI*2,En=c.CMD,Dn=[`top`,`right`,`bottom`,`left`];function On(e,t,n,r,i){var a=n.width,o=n.height;switch(e){case`top`:r.set(n.x+a/2,n.y-t),i.set(0,-1);break;case`bottom`:r.set(n.x+a/2,n.y+o+t),i.set(0,1);break;case`left`:r.set(n.x-t,n.y+o/2),i.set(-1,0);break;case`right`:r.set(n.x+a+t,n.y+o/2),i.set(1,0);break}}function kn(e,t,n,r,i,a,o,s,c){o-=e,s-=t;var l=Math.sqrt(o*o+s*s);o/=l,s/=l;var u=o*n+e,d=s*n+t;if(Math.abs(r-i)%Tn<1e-4)return c[0]=u,c[1]=d,l-n;if(a){var f=r;r=Qe(i),i=Qe(f)}else r=Qe(r),i=Qe(i);r>i&&(i+=Tn);var p=Math.atan2(s,o);if(p<0&&(p+=Tn),p>=r&&p<=i||p+Tn>=r&&p+Tn<=i)return c[0]=u,c[1]=d,l-n;var m=n*Math.cos(r)+e,h=n*Math.sin(r)+t,g=n*Math.cos(i)+e,_=n*Math.sin(i)+t,v=(m-o)*(m-o)+(h-s)*(h-s),y=(g-o)*(g-o)+(_-s)*(_-s);return v<y?(c[0]=m,c[1]=h,Math.sqrt(v)):(c[0]=g,c[1]=_,Math.sqrt(y))}function An(e,t,n,r,i,a,o,s){var c=i-e,l=a-t,u=n-e,d=r-t,f=Math.sqrt(u*u+d*d);u/=f,d/=f;var p=(c*u+l*d)/f;s&&(p=Math.min(Math.max(p,0),1)),p*=f;var m=o[0]=e+p*u,h=o[1]=t+p*d;return Math.sqrt((m-i)*(m-i)+(h-a)*(h-a))}function jn(e,t,n,r,i,a,o){n<0&&(e+=n,n=-n),r<0&&(t+=r,r=-r);var s=e+n,c=t+r,l=o[0]=Math.min(Math.max(i,e),s),u=o[1]=Math.min(Math.max(a,t),c);return Math.sqrt((l-i)*(l-i)+(u-a)*(u-a))}var G=[];function Mn(e,t,n){var r=jn(t.x,t.y,t.width,t.height,e.x,e.y,G);return n.set(G[0],G[1]),r}function Nn(e,t,n){for(var r=0,i=0,a=0,o=0,s,c,l=1/0,u=t.data,d=e.x,f=e.y,p=0;p<u.length;){var m=u[p++];p===1&&(r=u[p],i=u[p+1],a=r,o=i);var h=l;switch(m){case En.M:a=u[p++],o=u[p++],r=a,i=o;break;case En.L:h=An(r,i,u[p],u[p+1],d,f,G,!0),r=u[p++],i=u[p++];break;case En.C:h=ge(r,i,u[p++],u[p++],u[p++],u[p++],u[p],u[p+1],d,f,G),r=u[p++],i=u[p++];break;case En.Q:h=be(r,i,u[p++],u[p++],u[p],u[p+1],d,f,G),r=u[p++],i=u[p++];break;case En.A:var g=u[p++],_=u[p++],v=u[p++],y=u[p++],b=u[p++],x=u[p++];p+=1;var S=!!(1-u[p++]);s=Math.cos(b)*v+g,c=Math.sin(b)*y+_,p<=1&&(a=s,o=c);var C=(d-g)*y/v+g;h=kn(g,_,y,b,b+x,S,C,f,G),r=Math.cos(b+x)*v+g,i=Math.sin(b+x)*y+_;break;case En.R:a=r=u[p++],o=i=u[p++];var w=u[p++],T=u[p++];h=jn(a,o,w,T,d,f,G);break;case En.Z:h=An(r,i,a,o,d,f,G,!0),r=a,i=o;break}h<l&&(l=h,n.set(G[0],G[1]))}return l}var K=new a,q=new a,J=new a,Y=new a,X=new a;function Pn(e,t){if(e){var n=e.getTextGuideLine(),r=e.getTextContent();if(r&&n){var i=e.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],s=i.candidates||Dn,c=r.getBoundingRect().clone();c.applyTransform(r.getComputedTransform());var l=1/0,u=i.anchor,d=e.getComputedTransform(),f=d&&Fe([],d),p=t.get(`length2`)||0;u&&J.copy(u);for(var m=0;m<s.length;m++){var h=s[m];On(h,0,c,K,Y),a.scaleAndAdd(q,K,Y,p),q.transform(f);var g=e.getBoundingRect(),_=u?u.distance(q):e instanceof F?Nn(q,e.path,J):Mn(q,g,J);_<l&&(l=_,q.transform(d),J.transform(d),J.toArray(o[0]),q.toArray(o[1]),K.toArray(o[2]))}In(o,t.get(`minTurnAngle`)),n.setShape({points:o})}}}var Fn=[],Z=new a;function In(e,t){if(t<=180&&t>0){t=t/180*Math.PI,K.fromArray(e[0]),q.fromArray(e[1]),J.fromArray(e[2]),a.sub(Y,K,q),a.sub(X,J,q);var n=Y.len(),r=X.len();if(!(n<.001||r<.001)){Y.scale(1/n),X.scale(1/r);var i=Y.dot(X);if(Math.cos(t)<i){var o=An(q.x,q.y,J.x,J.y,K.x,K.y,Fn,!1);Z.fromArray(Fn),Z.scaleAndAdd(X,o/Math.tan(Math.PI-t));var s=J.x===q.x?(Z.y-q.y)/(J.y-q.y):(Z.x-q.x)/(J.x-q.x);if(isNaN(s))return;s<0?a.copy(Z,q):s>1&&a.copy(Z,J),Z.toArray(e[1])}}}}function Ln(e,t,n){if(n<=180&&n>0){n=n/180*Math.PI,K.fromArray(e[0]),q.fromArray(e[1]),J.fromArray(e[2]),a.sub(Y,q,K),a.sub(X,J,q);var r=Y.len(),i=X.len();if(!(r<.001||i<.001)&&(Y.scale(1/r),X.scale(1/i),Y.dot(t)<Math.cos(n))){var o=An(q.x,q.y,J.x,J.y,K.x,K.y,Fn,!1);Z.fromArray(Fn);var s=Math.PI/2,c=Math.acos(X.dot(t)),l=s+c-n;if(l>=s)a.copy(Z,J);else{Z.scaleAndAdd(X,o/Math.tan(Math.PI/2-l));var u=J.x===q.x?(Z.y-q.y)/(J.y-q.y):(Z.x-q.x)/(J.x-q.x);if(isNaN(u))return;u<0?a.copy(Z,q):u>1&&a.copy(Z,J)}Z.toArray(e[1])}}}function Rn(e,t,n,r){var i=n===`normal`,a=i?e:e.ensureState(n);a.ignore=t;var o=r.get(`smooth`);o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=r.getModel(`lineStyle`).getLineStyle();i?e.useStyle(s):a.style=s}function zn(e,t){var n=t.smooth,r=t.points;if(r)if(e.moveTo(r[0][0],r[0][1]),n>0&&r.length>=3){var i=ot(r[0],r[1]),a=ot(r[1],r[2]);if(!i||!a){e.lineTo(r[1][0],r[1][1]),e.lineTo(r[2][0],r[2][1]);return}var o=Math.min(i,a)*n,s=gt([],r[1],r[0],o/i),c=gt([],r[1],r[2],o/a),l=gt([],s,c,.5);e.bezierCurveTo(s[0],s[1],s[0],s[1],l[0],l[1]),e.bezierCurveTo(c[0],c[1],c[0],c[1],r[2][0],r[2][1])}else for(var u=1;u<r.length;u++)e.lineTo(r[u][0],r[u][1])}function Bn(e,t,n){var r=e.getTextGuideLine(),i=e.getTextContent();if(!i){r&&e.removeTextGuideLine();return}for(var a=t.normal,o=a.get(`show`),s=i.ignore,c=0;c<zt.length;c++){var l=zt[c],u=t[l],d=l===`normal`;if(u){var p=u.get(`show`);if((d?s:f(i.states[l]&&i.states[l].ignore,s))||!f(p,o)){var m=d?r:r&&r.states[l];m&&(m.ignore=!0),r&&Rn(r,!0,l,u);continue}r||(r=new We,e.setTextGuideLine(r),!d&&(s||!o)&&Rn(r,!0,`normal`,t.normal),e.stateProxy&&(r.stateProxy=e.stateProxy)),Rn(r,!1,l,u)}}if(r){ke(r.style,n),r.style.fill=null;var h=a.get(`showAbove`),g=e.textGuideLineConfig=e.textGuideLineConfig||{};g.showAbove=h||!1,r.buildPath=zn}}function Vn(e,t){t||=`labelLine`;for(var n={normal:e.getModel(t)},r=0;r<De.length;r++){var i=De[r];n[i]=e.getModel([i,t])}return n}function Hn(e){if(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].slice());return t}}function Un(e,t){var n=e.label,r=t&&t.getTextGuideLine();return{dataIndex:e.dataIndex,dataType:e.dataType,seriesIndex:e.seriesModel.seriesIndex,text:e.label.style.text,rect:e.hostRect,labelRect:e.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:Hn(r&&r.shape.points)}}var Wn=[`align`,`verticalAlign`,`width`,`height`,`fontSize`],Q=new me,Gn=L(),Kn=L();function qn(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];t[i]!=null&&(e[i]=t[i])}}var Jn=[`x`,`y`,`rotation`],Yn=function(){function e(){this._labelList=[],this._chartViewList=[]}return e.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},e.prototype._addLabel=function(e,t,n,r,i){var a=r.style,o=r.__hostTarget.textConfig||{},s=r.getComputedTransform(),c=r.getBoundingRect().plain();z.applyTransform(c,c,s),s?Q.setLocalTransform(s):(Q.x=Q.y=Q.rotation=Q.originX=Q.originY=0,Q.scaleX=Q.scaleY=1),Q.rotation=Qe(Q.rotation);var l=r.__hostTarget,u;if(l){u=l.getBoundingRect().plain();var d=l.getComputedTransform();z.applyTransform(u,u,d)}var f=u&&l.getTextGuideLine();this._labelList.push({label:r,labelLine:f,seriesModel:n,dataIndex:e,dataType:t,layoutOptionOrCb:i,layoutOption:null,rect:c,hostRect:u,priority:u?u.width*u.height:0,defaultAttr:{ignore:r.ignore,labelGuideIgnore:f&&f.ignore,x:Q.x,y:Q.y,scaleX:Q.scaleX,scaleY:Q.scaleY,rotation:Q.rotation,style:{x:a.x,y:a.y,align:a.align,verticalAlign:a.verticalAlign,width:a.width,height:a.height,fontSize:a.fontSize},cursor:r.cursor,attachedPos:o.position,attachedRot:o.rotation}})},e.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var n=e.__model,r=n.get(`labelLayout`);(rt(r)||Ot(r).length)&&e.group.traverse(function(e){if(e.ignore)return!0;var i=e.getTextContent(),a=Pt(e);i&&!i.disableLabelLayout&&t._addLabel(a.dataIndex,a.dataType,n,i,r)})},e.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),n=e.getHeight();function r(e,t){return function(){Pn(e,t)}}for(var i=0;i<this._labelList.length;i++){var a=this._labelList[i],o=a.label,s=o.__hostTarget,c=a.defaultAttr,l=void 0;l=rt(a.layoutOptionOrCb)?a.layoutOptionOrCb(Un(a,s)):a.layoutOptionOrCb,l||={},a.layoutOption=l;var d=Math.PI/180;s&&s.setTextConfig({local:!1,position:l.x!=null||l.y!=null?null:c.attachedPos,rotation:l.rotate==null?c.attachedRot:l.rotate*d,offset:[l.dx||0,l.dy||0]});var f=!1;if(l.x==null?(o.x=c.x,o.setStyle(`x`,c.style.x)):(o.x=u(l.x,t),o.setStyle(`x`,0),f=!0),l.y==null?(o.y=c.y,o.setStyle(`y`,c.style.y)):(o.y=u(l.y,n),o.setStyle(`y`,0),f=!0),l.labelLinePoints){var p=s.getTextGuideLine();p&&(p.setShape({points:l.labelLinePoints}),f=!1)}var m=Gn(o);m.needsUpdateLabelLine=f,o.rotation=l.rotate==null?c.rotation:l.rotate*d,o.scaleX=c.scaleX,o.scaleY=c.scaleY;for(var h=0;h<Wn.length;h++){var g=Wn[h];o.setStyle(g,l[g]==null?c.style[g]:l[g])}if(l.draggable){if(o.draggable=!0,o.cursor=`move`,s){var _=a.seriesModel;a.dataIndex!=null&&(_=a.seriesModel.getData(a.dataType).getItemModel(a.dataIndex)),o.on(`drag`,r(s,_.getModel(`labelLine`)))}}else o.off(`drag`),o.cursor=c.cursor}},e.prototype.layout=function(e){var t=e.getWidth(),n=e.getHeight(),r=[];et(this._labelList,function(e){e.defaultAttr.ignore||r.push(d({},e))});var i=Ne(r,function(e){return e.layoutOption.moveOverlap===`shiftX`}),a=Ne(r,function(e){return e.layoutOption.moveOverlap===`shiftY`});se(i,0,0,t),se(a,1,0,n);var o=Ne(r,function(e){return e.layoutOption.hideOverlap});jt(o),ie(o)},e.prototype.processLabelsOverall=function(){var e=this;et(this._chartViewList,function(t){var n=t.__model,r=t.ignoreLabelLineUpdate,i=n.isAnimationEnabled();t.group.traverse(function(t){if(t.ignore&&!t.forceLabelAnimation)return!0;var a=!r,o=t.getTextContent();!a&&o&&(a=Gn(o).needsUpdateLabelLine),a&&e._updateLabelLine(t,n),i&&e._animateLabels(t,n)})})},e.prototype._updateLabelLine=function(e,t){var n=e.getTextContent(),r=Pt(e),i=r.dataIndex;if(n&&i!=null){var a=t.getData(r.dataType),o=a.getItemModel(i),s={},c=a.getItemVisual(i,`style`);if(c){var l=a.getVisual(`drawType`);s.stroke=c[l]}var u=o.getModel(`labelLine`);Bn(e,Vn(o),s),Pn(e,u)}},e.prototype._animateLabels=function(e,t){var n=e.getTextContent(),r=e.getTextGuideLine();if(n&&(e.forceLabelAnimation||!n.ignore&&!n.invisible&&!e.disableLabelAnimation&&!tt(e))){var a=Gn(n),o=a.oldLayout,s=Pt(e),c=s.dataIndex,l={x:n.x,y:n.y,rotation:n.rotation},u=t.getData(s.dataType);if(o){n.attr(o);var d=e.prevStates;d&&(Le(d,`select`)>=0&&n.attr(a.oldLayoutSelect),Le(d,`emphasis`)>=0&&n.attr(a.oldLayoutEmphasis)),pt(n,l,t,c)}else if(n.attr(l),!st(n).valueAnimation){var p=f(n.style.opacity,1);n.style.opacity=0,je(n,{style:{opacity:p}},t,c)}if(a.oldLayout=l,n.states.select){var m=a.oldLayoutSelect={};qn(m,l,Jn),qn(m,n.states.select,Jn)}if(n.states.emphasis){var h=a.oldLayoutEmphasis={};qn(h,l,Jn),qn(h,n.states.emphasis,Jn)}i(n,c,u,t,t)}if(r&&!r.ignore&&!r.invisible){var a=Kn(r),o=a.oldLayout,g={points:r.shape.points};o?(r.attr({shape:o}),pt(r,{shape:g},t)):(r.setShape(g),r.style.strokePercent=0,je(r,{style:{strokePercent:1}},t)),a.oldLayout=g}},e}(),Xn=L();function Zn(e){e.registerUpdateLifecycle(`series:beforeupdate`,function(e,t,n){var r=Xn(t).labelManager;r||=Xn(t).labelManager=new Yn,r.clearLabels()}),e.registerUpdateLifecycle(`series:layoutlabels`,function(e,t,n){var r=Xn(t).labelManager;n.updatedSeries.forEach(function(e){r.addLabelsOfSeries(t.getViewOfSeriesModel(e))}),r.updateLayoutConfig(t),r.layout(t),r.processLabelsOverall()})}var Qn=Math.PI*2,$n=Math.PI/180;function er(e,t,n){t.eachSeriesByType(e,function(e){var t=e.getData(),r=t.mapDimension(`value`),i=E(e,n),a=i.cx,o=i.cy,s=i.r,c=i.r0,l=i.viewRect,u=-e.get(`startAngle`)*$n,d=e.get(`endAngle`),f=e.get(`padAngle`)*$n;d=d===`auto`?u-Qn:-d*$n;var p=e.get(`minAngle`)*$n+f,m=0;t.each(r,function(e){!isNaN(e)&&m++});var h=t.getSum(r),g=Math.PI/(h||m)*2,_=e.get(`clockwise`),v=e.get(`roseType`),y=e.get(`stillShowZeroSum`),b=t.getDataExtent(r);b[0]=0;var x=_?1:-1,S=[u,d],C=x*f/2;Ye(S,!_),u=S[0],d=S[1];var w=tr(e);w.startAngle=u,w.endAngle=d,w.clockwise=_,w.cx=a,w.cy=o,w.r=s,w.r0=c;var T=Math.abs(d-u),D=T,O=0,k=u;if(t.setLayout({viewRect:l,r:s}),t.each(r,function(e,n){var r;if(isNaN(e)){t.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:_,cx:a,cy:o,r0:c,r:v?NaN:s});return}r=v===`area`?T/m:h===0&&y?g:e*g,r<p?(r=p,D-=p):O+=e;var i=k+x*r,l=0,u=0;f>r?(l=k+x*r/2,u=l):(l=k+C,u=i-C),t.setItemLayout(n,{angle:r,startAngle:l,endAngle:u,clockwise:_,cx:a,cy:o,r0:c,r:v?Bt(e,b,[c,s]):s}),k=i}),D<Qn&&m)if(D<=.001){var A=T/m;t.each(r,function(e,n){if(!isNaN(e)){var r=t.getItemLayout(n);r.angle=A;var i=0,a=0;A<f?(i=u+x*(n+1/2)*A,a=i):(i=u+x*n*A+C,a=u+x*(n+1)*A-C),r.startAngle=i,r.endAngle=a}})}else g=D/O,k=u,t.each(r,function(e,n){if(!isNaN(e)){var r=t.getItemLayout(n),i=r.angle===p?p:e*g,a=0,o=0;i<f?(a=k+x*i/2,o=a):(a=k+C,o=k+x*i-C),r.startAngle=a,r.endAngle=o,k+=x*i}})})}var tr=L();function nr(e){return{seriesType:e,reset:function(e,t){var n=t.findComponents({mainType:`legend`});if(!(!n||!n.length)){var r=e.getData();r.filterSelf(function(e){for(var t=r.getName(e),i=0;i<n.length;i++)if(!n[i].isSelected(t))return!1;return!0})}}}}var rr=Math.PI/180;function ir(e,t,n,r,i,a,o,s,c,l){if(e.length<2)return;function u(e){for(var a=e.rB,o=a*a,s=0;s<e.list.length;s++){var c=e.list[s],l=Math.abs(c.label.y-n),u=r+c.len,d=u*u,f=Math.sqrt(Math.abs((1-l*l/o)*d)),p=t+(f+c.len2)*i,m=p-c.label.x,h=c.targetTextWidth-m*i;or(c,h,!0),c.label.x=p}}function d(e){for(var a={list:[],maxY:0},o={list:[],maxY:0},s=0;s<e.length;s++)if(e[s].labelAlignTo===`none`){var c=e[s],l=c.label.y>n?o:a,d=Math.abs(c.label.y-n);if(d>=l.maxY){var f=c.label.x-t-c.len2*i,p=r+c.len;l.rB=Math.abs(f)<p?Math.sqrt(d*d/(1-f*f/p/p)):p,l.maxY=d}l.list.push(c)}u(a),u(o)}for(var f=e.length,p=0;p<f;p++)if(e[p].position===`outer`&&e[p].labelAlignTo===`labelLine`){var m=e[p].label.x-l;e[p].linePoints[1][0]+=m,e[p].label.x=l}se(e,1,c,c+o)&&d(e)}function ar(e,t,n,r,i,a,o,s){for(var c=[],l=[],u=Number.MAX_VALUE,d=-Number.MAX_VALUE,f=0;f<e.length;f++){var p=e[f].label;ur(e[f])||(p.x<t?(u=Math.min(u,p.x),c.push(e[f])):(d=Math.max(d,p.x),l.push(e[f])))}for(var f=0;f<e.length;f++){var m=e[f];if(!ur(m)&&m.linePoints){if(m.labelStyleWidth!=null)continue;var p=m.label,h=m.linePoints,g=void 0;g=m.labelAlignTo===`edge`?p.x<t?h[2][0]-m.labelDistance-o-m.edgeDistance:o+i-m.edgeDistance-h[2][0]-m.labelDistance:m.labelAlignTo===`labelLine`?p.x<t?u-o-m.bleedMargin:o+i-d-m.bleedMargin:p.x<t?p.x-o-m.bleedMargin:o+i-p.x-m.bleedMargin,m.targetTextWidth=g,or(m,g,!1)}}ir(l,t,n,r,1,i,a,o,s,d),ir(c,t,n,r,-1,i,a,o,s,u);for(var f=0;f<e.length;f++){var m=e[f];if(!ur(m)&&m.linePoints){var p=m.label,h=m.linePoints,_=m.labelAlignTo===`edge`,v=p.style.padding,y=v?v[1]+v[3]:0,b=p.style.backgroundColor?0:y,x=m.rect.width+b,S=h[1][0]-h[2][0];_?p.x<t?h[2][0]=o+m.edgeDistance+x+m.labelDistance:h[2][0]=o+i-m.edgeDistance-x-m.labelDistance:(p.x<t?h[2][0]=p.x+m.labelDistance:h[2][0]=p.x-m.labelDistance,h[1][0]=h[2][0]+S),h[1][1]=h[2][1]=p.y}}}function or(e,t,n){if(e.labelStyleWidth==null){var r=e.label,i=r.style,a=e.rect,o=i.backgroundColor,s=i.padding,c=s?s[1]+s[3]:0,l=i.overflow,u=a.width+(o?0:c);if(t<u||n){if(l&&l.match(`break`)){r.setStyle(`backgroundColor`,null),r.setStyle(`width`,t-c);var d=r.getBoundingRect();r.setStyle(`width`,Math.ceil(d.width)),r.setStyle(`backgroundColor`,o)}else{var f=t-c,p=t<u?f:n?f>e.unconstrainedWidth?null:f:null;r.setStyle(`width`,p)}sr(a,r)}}}function sr(e,t){lr.rect=e,Ft(lr,t,cr)}var cr={minMarginForce:[null,0,null,0],marginDefault:[1,0,1,0]},lr={};function ur(e){return e.position===`center`}function dr(e){var t=e.getData(),n=[],r,i,o=!1,s=(e.get(`minShowLabelAngle`)||0)*rr,c=t.getLayout(`viewRect`),l=t.getLayout(`r`),d=c.width,f=c.x,p=c.y,m=c.height;function h(e){e.ignore=!0}function g(e){if(!e.ignore)return!0;for(var t in e.states)if(e.states[t].ignore===!1)return!0;return!1}t.each(function(e){var c=t.getItemGraphicEl(e),p=c.shape,_=c.getTextContent(),v=c.getTextGuideLine(),y=t.getItemModel(e),b=y.getModel(`label`),x=b.get(`position`)||y.get([`emphasis`,`label`,`position`]),S=b.get(`distanceToLabelLine`),C=b.get(`alignTo`),w=u(b.get(`edgeDistance`),d),T=b.get(`bleedMargin`);T??=Math.min(d,m)>200?10:2;var E=y.getModel(`labelLine`),D=E.get(`length`);D=u(D,d);var O=E.get(`length2`);if(O=u(O,d),Math.abs(p.endAngle-p.startAngle)<s){et(_.states,h),_.ignore=!0,v&&(et(v.states,h),v.ignore=!0);return}if(g(_)){var k=(p.startAngle+p.endAngle)/2,A=Math.cos(k),j=Math.sin(k),M,ee,te,N;r=p.cx,i=p.cy;var P=x===`inside`||x===`inner`;if(x===`center`)M=p.cx,ee=p.cy,N=`center`;else{var F=(P?(p.r+p.r0)/2*A:p.r*A)+r,ne=(P?(p.r+p.r0)/2*j:p.r*j)+i;if(M=F+A*3,ee=ne+j*3,!P){var re=F+A*(D+l-p.r),I=ne+j*(D+l-p.r),L=re+(A<0?-1:1)*O,R=I;M=C===`edge`?A<0?f+w:f+d-w:L+(A<0?-S:S),ee=R,te=[[F,ne],[re,I],[L,R]]}N=P?`center`:C===`edge`?A>0?`right`:`left`:A>0?`left`:`right`}var B=Math.PI,V=0,ie=b.get(`rotate`);if(He(ie))V=ie*(B/180);else if(x===`center`)V=0;else if(ie===`radial`||ie===!0)V=A<0?-k+B:-k;else if(ie===`tangential`&&x!==`outside`&&x!==`outer`){var ae=Math.atan2(A,j);ae<0&&(ae=B*2+ae),j>0&&(ae=B+ae),V=ae-B}if(o=!!V,_.x=M,_.y=ee,_.rotation=V,_.setStyle({verticalAlign:`middle`}),P){_.setStyle({align:N});var H=_.states.select;H&&(H.x+=_.x,H.y+=_.y)}else{var oe=new z(0,0,0,0);sr(oe,_),n.push({label:_,labelLine:v,position:x,len:D,len2:O,minTurnAngle:E.get(`minTurnAngle`),maxSurfaceAngle:E.get(`maxSurfaceAngle`),surfaceNormal:new a(A,j),linePoints:te,textAlign:N,labelDistance:S,labelAlignTo:C,edgeDistance:w,bleedMargin:T,rect:oe,unconstrainedWidth:oe.width,labelStyleWidth:_.style.width})}c.setTextConfig({inside:P})}}),!o&&e.get(`avoidLabelOverlap`)&&ar(n,r,i,l,d,m,f,p);for(var _=0;_<n.length;_++){var v=n[_],y=v.label,b=v.labelLine,x=isNaN(y.x)||isNaN(y.y);if(y){y.setStyle({align:v.textAlign}),x&&(et(y.states,h),y.ignore=!0);var S=y.states.select;S&&(S.x+=y.x,S.y+=y.y)}if(b){var C=v.linePoints;x||!C?(et(b.states,h),b.ignore=!0):(In(C,v.minTurnAngle),Ln(C,v.surfaceNormal,v.maxSurfaceAngle),b.setShape({points:C}),y.__hostTarget.textGuideLineConfig={anchor:new a(C[0][0],C[0][1])})}}}var fr=function(e){ce(t,e);function t(t,n,r){var i=e.call(this)||this;i.z2=2;var a=new ue;return i.setTextContent(a),i.updateData(t,n,r,!0),i}return t.prototype.updateData=function(e,t,n,r){var i=this,a=e.hostModel,o=e.getItemModel(t),s=o.getModel(`emphasis`),c=e.getItemLayout(t),l=U(Ve(o.getModel(`itemStyle`),c,!0),c);if(isNaN(l.startAngle)){i.setShape(l);return}if(r){i.setShape(l);var u=a.getShallow(`animationType`);a.ecModel.ssr?(je(i,{scaleX:0,scaleY:0},a,{dataIndex:t,isFrom:!0}),i.originX=l.cx,i.originY=l.cy):u===`scale`?(i.shape.r=c.r0,je(i,{shape:{r:c.r}},a,t)):n==null?(i.shape.endAngle=c.startAngle,pt(i,{shape:{endAngle:c.endAngle}},a,t)):(i.setShape({startAngle:n,endAngle:n}),je(i,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},a,t))}else ze(i),pt(i,{shape:l},a,t);i.useStyle(e.getItemVisual(t,`style`)),oe(i,o);var d=(c.startAngle+c.endAngle)/2,f=a.get(`selectedOffset`),p=Math.cos(d)*f,h=Math.sin(d)*f,g=o.getShallow(`cursor`);g&&i.attr(`cursor`,g),this._updateLabel(a,e,t),i.ensureState(`emphasis`).shape=U({r:c.r+(s.get(`scale`)&&s.get(`scaleSize`)||0)},Ve(s.getModel(`itemStyle`),c)),U(i.ensureState(`select`),{x:p,y:h,shape:Ve(o.getModel([`select`,`itemStyle`]),c)}),U(i.ensureState(`blur`),{shape:Ve(o.getModel([`blur`,`itemStyle`]),c)});var _=i.getTextGuideLine(),v=i.getTextContent();_&&U(_.ensureState(`select`),{x:p,y:h}),U(v.ensureState(`select`),{x:p,y:h}),m(this,s.get(`focus`),s.get(`blurScope`),s.get(`disabled`))},t.prototype._updateLabel=function(e,t,n){var r=this,i=t.getItemModel(n),a=i.getModel(`labelLine`),o=t.getItemVisual(n,`style`),s=o&&o.fill,c=o&&o.opacity;vt(r,Ct(i),{labelFetcher:t.hostModel,labelDataIndex:n,inheritColor:s,defaultOpacity:c,defaultText:e.getFormattedLabel(n,`normal`)||t.getName(n)});var l=r.getTextContent();r.setTextConfig({position:null,rotation:null}),l.attr({z2:10});var u=i.get([`label`,`position`]);if(u!==`outside`&&u!==`outer`)r.removeTextGuideLine();else{var d=this.getTextGuideLine();d||(d=new We,this.setTextGuideLine(d)),Bn(this,Vn(i),{stroke:s,opacity:Mt(a.get([`lineStyle`,`opacity`]),c,1)})}},t}(Ce),pr=function(e){ce(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return t.prototype.render=function(e,t,n,r){var i=e.getData(),a=this._data,o=this.group,s;if(!a&&i.count()>0){for(var c=i.getItemLayout(0),l=1;isNaN(c&&c.startAngle)&&l<i.count();++l)c=i.getItemLayout(l);c&&(s=c.startAngle)}if(this._emptyCircleSector&&o.remove(this._emptyCircleSector),i.count()===0&&e.get(`showEmptyCircle`)){var u=tr(e),d=new Ce({shape:lt(u)});d.useStyle(e.getModel(`emptyCircleStyle`).getItemStyle()),this._emptyCircleSector=d,o.add(d)}i.diff(a).add(function(e){var t=new fr(i,e,s);i.setItemGraphicEl(e,t),o.add(t)}).update(function(e,t){var n=a.getItemGraphicEl(t);n.updateData(i,e,s),n.off(`click`),o.add(n),i.setItemGraphicEl(e,n)}).remove(function(t){var n=a.getItemGraphicEl(t);Pe(n,e,t)}).execute(),dr(e),e.get(`animationTypeUpdate`)!==`expansion`&&(this._data=i)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,t){var n=t.getData().getItemLayout(0);if(n){var r=e[0]-n.cx,i=e[1]-n.cy,a=Math.sqrt(r*r+i*i);return a<=n.r&&a>=n.r0}},t.type=`pie`,t}(B);function mr(e,t,n){t=dt(t)&&{coordDimensions:t}||U({encodeDefine:e.getEncode()},t);var r=e.getSource(),i=Xe(r,t).dimensions,a=new o(i,e);return a.initData(r,n),a}var hr=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){return this._getRawData().indexOfName(e)>=0},e.prototype.indexOfName=function(e){return this._getDataWithEncodedVisual().indexOfName(e)},e.prototype.getItemVisual=function(e,t){return this._getDataWithEncodedVisual().getItemVisual(e,t)},e}(),gr=L(),_r=function(e){ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new hr(Te(this.getData,this),Te(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return mr(this,{coordDimensions:[`value`],encodeDefaulter:bt(fe,this)})},t.prototype.getDataParams=function(t){var n=this.getData(),r=gr(n),i=r.seats;if(!i){var a=[];n.each(n.mapDimension(`value`),function(e){a.push(e)}),i=r.seats=k(a,n.hostModel.get(`percentPrecision`))}var o=e.prototype.getDataParams.call(this,t);return o.percent=i[t]||0,o.$vars.push(`percent`),o},t.prototype._defaultLabelLine=function(e){te(e,`labelLine`,[`show`]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.type=`series.pie`,t.defaultOption={z:2,legendHoverLink:!0,colorBy:`data`,center:[`50%`,`50%`],radius:[0,`50%`],clockwise:!0,startAngle:90,endAngle:`auto`,padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,coordinateSystemUsage:`box`,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:`truncate`,position:`outer`,alignTo:`none`,edgeDistance:`25%`,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:30,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:`solid`}},itemStyle:{borderWidth:1,borderJoin:`round`},showEmptyCircle:!0,emptyCircleStyle:{color:`lightgray`,opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:`expansion`,animationDuration:1e3,animationTypeUpdate:`transition`,animationEasingUpdate:`cubicInOut`,animationDurationUpdate:500,animationEasing:`cubicInOut`},t}(l);_e({fullType:_r.type,getCoord2:function(e){return e.getShallow(`center`)}});var vr=_r;function yr(e){return{seriesType:e,reset:function(e,t){var n=e.getData();n.filterSelf(function(e){var t=n.mapDimension(`value`),r=n.get(t,e);return!(He(r)&&!isNaN(r)&&r<0)})}}}function br(e){e.registerChartView(pr),e.registerSeriesModel(vr),ne(`pie`,e.registerAction),e.registerLayout(bt(er,`pie`)),e.registerProcessor(nr(`pie`)),e.registerProcessor(yr(`pie`))}var xr=[`itemStyle`,`borderWidth`],Sr=[{xy:`x`,wh:`width`,index:0,posDesc:[`left`,`right`]},{xy:`y`,wh:`height`,index:1,posDesc:[`top`,`bottom`]}],Cr=new At,wr=function(e){ce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(e,t,n){var r=this.group,i=e.getData(),a=this._data,o=e.coordinateSystem,s=o.getBaseAxis().isHorizontal(),c=o.master.getRect(),l={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:o,coordSysExtent:[[c.x,c.x+c.width],[c.y,c.y+c.height]],isHorizontal:s,valueDim:Sr[+s],categoryDim:Sr[1-s]};i.diff(a).add(function(e){if(i.hasValue(e)){var t=Ir(i,e),n=Tr(i,e,t,l),a=zr(i,l,n);i.setItemGraphicEl(e,a),r.add(a),Gr(a,l,n)}}).update(function(e,t){var n=a.getItemGraphicEl(t);if(!i.hasValue(e)){r.remove(n);return}var o=Ir(i,e),s=Tr(i,e,o,l),c=Hr(i,s);n&&c!==n.__pictorialShapeStr&&(r.remove(n),i.setItemGraphicEl(e,null),n=null),n?Br(n,l,s):n=zr(i,l,s,!0),i.setItemGraphicEl(e,n),n.__pictorialSymbolMeta=s,r.add(n),Gr(n,l,s)}).remove(function(e){var t=a.getItemGraphicEl(e);t&&Vr(a,e,t.__pictorialSymbolMeta.animationModel,t)}).execute();var u=e.get(`clip`,!0)?Dt(e.coordinateSystem,!1,e):null;return u?r.setClipPath(u):r.removeClipPath(),this._data=i,this.group},t.prototype.remove=function(e,t){var n=this.group,r=this._data;e.get(`animation`)?r&&r.eachItemGraphicEl(function(t){Vr(r,Pt(t).dataIndex,e,t)}):n.removeAll()},t.type=`pictorialBar`,t}(B);function Tr(e,t,n,r){var i=e.getItemLayout(t),a=n.get(`symbolRepeat`),o=n.get(`symbolClip`),s=n.get(`symbolPosition`)||`start`,c=(n.get(`symbolRotate`)||0)*Math.PI/180||0,l=n.get(`symbolPatternSize`)||2,u=n.isAnimationEnabled(),d={dataIndex:t,layout:i,itemModel:n,symbolType:e.getItemVisual(t,`symbol`)||`circle`,style:e.getItemVisual(t,`style`),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:n.get(`symbolRepeatDirection`),symbolPatternSize:l,rotation:c,animationModel:u?n:null,hoverScale:u&&n.get([`emphasis`,`scale`]),z2:n.getShallow(`z`,!0)||0};Er(n,a,i,r,d),Or(e,t,i,a,o,d.boundingLength,d.pxSign,l,r,d),kr(n,d.symbolScale,c,r,d);var f=d.symbolSize,p=A(n.get(`symbolOffset`),f);return Ar(n,f,i,a,o,p,s,d.valueLineWidth,d.boundingLength,d.repeatCutLength,r,d),d}function Er(e,t,n,r,i){var a=r.valueDim,o=e.get(`symbolBoundingData`),s=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),c=s.toGlobalCoord(s.dataToCoord(0)),l=1-(n[a.wh]<=0),u;if(dt(o)){var d=[Dr(s,o[0])-c,Dr(s,o[1])-c];d[1]<d[0]&&d.reverse(),u=d[l]}else u=o==null?t?r.coordSysExtent[a.index][l]-c:n[a.wh]:Dr(s,o)-c;i.boundingLength=u,t&&(i.repeatCutLength=n[a.wh]);var f=a.xy===`x`,p=s.inverse;i.pxSign=f&&!p||!f&&p?u>=0?1:-1:u>0?1:-1}function Dr(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function Or(e,t,n,r,i,a,o,s,c,l){var d=c.valueDim,f=c.categoryDim,p=Math.abs(n[f.wh]),m=e.getItemVisual(t,`symbolSize`),h=dt(m)?m.slice():m==null?[`100%`,`100%`]:[m,m];h[f.index]=u(h[f.index],p),h[d.index]=u(h[d.index],r?p:Math.abs(a)),l.symbolSize=h;var g=l.symbolScale=[h[0]/s,h[1]/s];g[d.index]*=(c.isHorizontal?-1:1)*o}function kr(e,t,n,r,i){var a=e.get(xr)||0;a&&(Cr.attr({scaleX:t[0],scaleY:t[1],rotation:n}),Cr.updateTransform(),a/=Cr.getLineScale(),a*=t[r.valueDim.index]),i.valueLineWidth=a||0}function Ar(e,t,n,r,i,a,o,s,c,l,d,f){var p=d.categoryDim,m=d.valueDim,h=f.pxSign,g=Math.max(t[m.index]+s,0),_=g;if(r){var v=Math.abs(c),y=ae(e.get(`symbolMargin`),`15%`)+``,b=!1;y.lastIndexOf(`!`)===y.length-1&&(b=!0,y=y.slice(0,y.length-1));var x=u(y,t[m.index]),S=Math.max(g+x*2,0),C=b?0:x*2,w=V(r),T=w?r:Kr((v+C)/S);x=(v-T*g)/2/(b?T:Math.max(T-1,1)),S=g+x*2,C=b?0:x*2,!w&&r!==`fixed`&&(T=l?Kr((Math.abs(l)+C)/S):0),_=T*S-C,f.repeatTimes=T,f.symbolMargin=x}var E=h*(_/2),D=f.pathPosition=[];D[p.index]=n[p.wh]/2,D[m.index]=o===`start`?E:o===`end`?c-E:c/2,a&&(D[0]+=a[0],D[1]+=a[1]);var O=f.bundlePosition=[];O[p.index]=n[p.xy],O[m.index]=n[m.xy];var k=f.barRectShape=U({},n);k[m.wh]=h*Math.max(Math.abs(n[m.wh]),Math.abs(D[m.index]+E)),k[p.wh]=n[p.wh];var A=f.clipShape={};A[p.xy]=-n[p.xy],A[p.wh]=d.ecSize[p.wh],A[m.xy]=0,A[m.wh]=n[m.wh]}function jr(e){var t=e.symbolPatternSize,n=Ke(e.symbolType,-t/2,-t/2,t,t);return n.attr({culling:!0}),n.type!==`image`&&n.setStyle({strokeNoScale:!0}),n}function Mr(e,t,n,r){var i=e.__pictorialBundle,a=n.symbolSize,o=n.valueLineWidth,s=n.pathPosition,c=t.valueDim,l=n.repeatTimes||0,u=0,d=a[t.valueDim.index]+o+n.symbolMargin*2;for(Ur(e,function(e){e.__pictorialAnimationIndex=u,e.__pictorialRepeatTimes=l,u<l?Wr(e,null,m(u),n,r):Wr(e,null,{scaleX:0,scaleY:0},n,r,function(){i.remove(e)}),u++});u<l;u++){var f=jr(n);f.__pictorialAnimationIndex=u,f.__pictorialRepeatTimes=l,i.add(f);var p=m(u);Wr(f,{x:p.x,y:p.y,scaleX:0,scaleY:0},{scaleX:p.scaleX,scaleY:p.scaleY,rotation:p.rotation},n,r)}function m(e){var t=s.slice(),r=n.pxSign,i=e;return(n.symbolRepeatDirection===`start`?r>0:r<0)&&(i=l-1-e),t[c.index]=d*(i-l/2+.5)+s[c.index],{x:t[0],y:t[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function Nr(e,t,n,r){var i=e.__pictorialBundle,a=e.__pictorialMainPath;a?Wr(a,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,r):(a=e.__pictorialMainPath=jr(n),i.add(a),Wr(a,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,r))}function Pr(e,t,n){var r=U({},t.barRectShape),i=e.__pictorialBarRect;i?Wr(i,null,{shape:r},t,n):(i=e.__pictorialBarRect=new y({z2:2,shape:r,silent:!0,style:{stroke:`transparent`,fill:`transparent`,lineWidth:0}}),i.disableMorphing=!0,e.add(i))}function Fr(e,t,n,r){if(n.symbolClip){var i=e.__pictorialClipPath,a=U({},n.clipShape),o=t.valueDim,s=n.animationModel,c=n.dataIndex;if(i)pt(i,{shape:a},s,c);else{a[o.wh]=0,i=new y({shape:a}),e.__pictorialBundle.setClipPath(i),e.__pictorialClipPath=i;var l={};l[o.wh]=n.clipShape[o.wh],ut[r?`updateProps`:`initProps`](i,{shape:l},s,c)}}}function Ir(e,t){var n=e.getItemModel(t);return n.getAnimationDelayParams=Lr,n.isAnimationEnabled=Rr,n}function Lr(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function Rr(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow(`animation`)}function zr(e,t,n,r){var i=new S,a=new S;return i.add(a),i.__pictorialBundle=a,a.x=n.bundlePosition[0],a.y=n.bundlePosition[1],n.symbolRepeat?Mr(i,t,n):Nr(i,t,n),Pr(i,n,r),Fr(i,t,n,r),i.__pictorialShapeStr=Hr(e,n),i.__pictorialSymbolMeta=n,i}function Br(e,t,n){var r=n.animationModel,i=n.dataIndex,a=e.__pictorialBundle;pt(a,{x:n.bundlePosition[0],y:n.bundlePosition[1]},r,i),n.symbolRepeat?Mr(e,t,n,!0):Nr(e,t,n,!0),Pr(e,n,!0),Fr(e,t,n,!0)}function Vr(e,t,n,r){var i=r.__pictorialBarRect;i&&i.removeTextContent();var a=[];Ur(r,function(e){a.push(e)}),r.__pictorialMainPath&&a.push(r.__pictorialMainPath),r.__pictorialClipPath&&(n=null),et(a,function(e){Et(e,{scaleX:0,scaleY:0},n,t,function(){r.parent&&r.parent.remove(r)})}),e.setItemGraphicEl(t,null)}function Hr(e,t){return[e.getItemVisual(t.dataIndex,`symbol`)||`none`,!!t.symbolRepeat,!!t.symbolClip].join(`:`)}function Ur(e,t,n){et(e.__pictorialBundle.children(),function(r){r!==e.__pictorialBarRect&&t.call(n,r)})}function Wr(e,t,n,r,i,a){t&&e.attr(t),r.symbolClip&&!i?n&&e.attr(n):n&&ut[i?`updateProps`:`initProps`](e,n,r.animationModel,r.dataIndex,a)}function Gr(e,t,n){var r=n.dataIndex,i=n.itemModel,a=i.getModel(`emphasis`),o=a.getModel(`itemStyle`).getItemStyle(),s=i.getModel([`blur`,`itemStyle`]).getItemStyle(),c=i.getModel([`select`,`itemStyle`]).getItemStyle(),l=i.getShallow(`cursor`),u=a.get(`focus`),d=a.get(`blurScope`),f=a.get(`scale`);Ur(e,function(e){if(e instanceof _){var t=e.style;e.useStyle(U({image:t.image,x:t.x,y:t.y,width:t.width,height:t.height},n.style))}else e.useStyle(n.style);var r=e.ensureState(`emphasis`);r.style=o,f&&(r.scaleX=e.scaleX*1.1,r.scaleY=e.scaleY*1.1),e.ensureState(`blur`).style=s,e.ensureState(`select`).style=c,l&&(e.cursor=l),e.z2=n.z2});var p=t.valueDim.posDesc[+(n.boundingLength>0)],h=e.__pictorialBarRect;h.ignoreClip=!0,vt(h,Ct(i),{labelFetcher:t.seriesModel,labelDataIndex:r,defaultText:Lt(t.seriesModel.getData(),r),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:p}),m(e,u,d,a.get(`disabled`))}function Kr(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}var qr=wr,Jr=function(e){ce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n.defaultSymbol=`roundRect`,n}return t.prototype.getInitialData=function(t){return t.stack=null,e.prototype.getInitialData.apply(this,arguments)},t.type=`series.pictorialBar`,t.dependencies=[`grid`],t.defaultOption=R(Be.defaultOption,{symbol:`circle`,symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:`end`,symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:`-100%`,clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:x.color.primary}}}),t}(Be);function Yr(e){e.registerChartView(qr),e.registerSeriesModel(Jr),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,bt(N,`pictorialBar`)),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,h(`pictorialBar`))}var Xr={:{population:2e3,gdp:`1.8`,area:`14335`},:{population:500,gdp:`3500`,area:`11234`},:{population:400,gdp:`2800`,area:`5951`},:{population:350,gdp:`2200`,area:`12723`},:{population:300,gdp:`1800`,area:`7148`},:{population:320,gdp:`1500`,area:`6344`},:{population:700,gdp:`2600`,area:`12479`},:{population:600,gdp:`2300`,area:`16588`},:{population:300,gdp:`1600`,area:`5321`},:{population:250,gdp:`1200`,area:`16314`},:{population:400,gdp:`1700`,area:`5385`},:{population:250,gdp:`900`,area:`7962`},:{population:300,gdp:`1500`,area:`4372`},:{population:120,gdp:`1200`,area:`7440`},:{population:500,gdp:`2400`,area:`12240`},:{population:550,gdp:`3200`,area:`13283`},:{population:300,gdp:`800`,area:`12289`},:{population:150,gdp:`750`,area:`15000`},:{population:120,gdp:`450`,area:`153000`},:{population:500,gdp:`1700`,area:`60400`},:{population:90,gdp:`400`,area:`84200`}},$=n(r()),Zr=[`#fbdf88`,`#ea580c`],Qr=Object.keys(Xr),$r=Array.from({length:5},(e,t)=>({name:Qr[t],value:Xr[Qr[t]].population}));function ei(){return(0,$.jsx)(Ee,{use:[Yr,Ie,Me,Zn],option:{grid:{top:0,bottom:0,left:`8%`,right:`16%`},xAxis:{show:!1},yAxis:{axisLine:{show:!1},axisTick:{show:!1},axisLabel:{fontSize:16,margin:16,inside:!1,verticalAlign:`middle`,color:`#000000`,formatter:(e,t)=>`{a|NO.${++t}} ${e}`,rich:{a:{color:`rgba(0, 0, 0,0.6)`}}},data:$r.map(e=>e.name),type:`category`,inverse:!0,animationDuration:300,animationDurationUpdate:300},series:[{type:`bar`,data:$r.map(e=>e.value),realtimeSort:!0,barWidth:8,itemStyle:{borderRadius:4,color:{type:`linear`,x:1,y:0,x2:0,y2:0,colorStops:Zr.map((e,t)=>({offset:t,color:e})),global:!1}},showBackground:!0,backgroundStyle:{borderRadius:4},label:{show:!0,color:`#000000`,valueAnimation:!0,fontSize:18,fontWeight:`bold`},labelLayout:e=>({x:`100%`,y:e.rect.y+e.rect.height/2,verticalAlign:`middle`,align:`right`})},{name:`dot`,type:`pictorialBar`,symbol:`circle`,symbolSize:16,z:12,itemStyle:{color:Zr[0],shadowColor:Zr[0],shadowBlur:10},data:$r.map(e=>({value:e.value,symbolPosition:`end`}))}],animationDuration:0,animationDurationUpdate:1e3,animationEasing:`linear`,animationEasingUpdate:`linear`}})}var ti=[`#fbdf88`,`#ea580c`],ni={type1:``,type2:``},ri=[[],[],[]];for(let e=0;e<30;e++)ri[0].push(`${e+1}`.padStart(2,`0`)),ri[1].push(Math.round(e*Math.random()*1e3)),ri[2].push(Math.round(e*Math.random()*1020));function ii(){let e=(0,W.useRef)(null),t=(0,W.useRef)(0);return yt(()=>{e.current&&(e.current?.dispatchAction({type:`dataZoom`,startValue:t.current,endValue:t.current+8}),t.current=(t.current+1)%(ri[0].length-8))},2e3),(0,$.jsx)(Ee,{ref:e,use:[xe,$e,Oe,wt],option:{tooltip:{trigger:`axis`,axisPointer:{type:`shadow`},textStyle:{color:`#fff`},backgroundColor:`rgba(234, 88, 12,0.3)`,borderColor:ti[1],borderWidth:1,borderRadius:8},grid:{top:16,bottom:16,left:16,right:16,outerBoundsMode:`same`},legend:{right:16,top:0,data:Object.values(ni).map((e,t)=>({name:e,value:2e3,icon:`none`,textStyle:{color:ti[t]}}))},calculable:!0,xAxis:{type:`category`,axisLine:{lineStyle:{color:`rgba(0, 0, 0, 0.1)`}},axisLabel:{interval:0,color:`rgba(0, 0, 0, 0.6)`},splitLine:{show:!1},axisTick:{show:!1},data:ri[0]},yAxis:{type:`value`,axisLabel:{interval:0,color:`rgba(0, 0, 0, 0.6)`},splitLine:{show:!1},axisLine:{show:!0,lineStyle:{color:`rgba(0, 0, 0, 0.1)`}}},dataZoom:{type:`slider`,show:!1,realtime:!0,startValue:0,endValue:8},series:[{name:``,type:`line`,symbol:`none`,smooth:!0,itemStyle:{color:ti[0]},areaStyle:{color:{type:`linear`,x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:ti[0]},{offset:1,color:`rgba(255,255,255,0.1)`}],global:!1}},markPoint:{symbol:`rect`,symbolSize:[50,20],symbolOffset:[0,-10],label:{color:`#ffffff`},data:[{type:`max`,name:``}]},data:ri[1]},{name:``,type:`line`,symbol:`none`,smooth:!0,itemStyle:{color:ti[1]},areaStyle:{color:{type:`linear`,x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:ti[1]},{offset:1,color:`rgba(255,255,255,0.1)`}],global:!1}},markPoint:{symbol:`rect`,symbolSize:[50,20],symbolOffset:[0,-10],label:{color:`#ffffff`},data:[{type:`max`,name:``}]},data:ri[2]}]}})}var ai=Object.keys(Xr);function oi(){return(0,$.jsx)(ct,{rowHeight:50,styles:{header:{color:`rgba(0, 0, 0, 0.6)`},body:{color:`#000000`}},column:[{title:``,dataIndex:`value1`},{title:``,dataIndex:`value2`},{title:``,dataIndex:`value3`},{title:``,dataIndex:`value4`}],data:Array.from({length:ai.length},(e,t)=>{let n=Math.random()*100;return{value1:ai[t],value2:`ZL${Math.round(Math.random()*1e7)}`,value3:(Math.random()*1e3).toFixed(2),value4:(0,$.jsx)(`span`,{style:{color:n>90?`#fbdf88`:n>60?`#ffa800`:`#ea580c`},children:n.toFixed(2).concat(`%`)})}})})}function si(e){let{value:t,duration:n=2,delay:r,options:i,className:a,style:o}=e,[s,c]=(0,W.useState)(0);return(0,W.useEffect)(()=>{let e={curVal:s},a=P.to(e,{curVal:t,duration:n,delay:r,onUpdate:function(){c(this.targets()[0].curVal.toLocaleString(`zh-CN`,i))}});return()=>{a.kill()}},[t,n,r,i]),(0,$.jsx)(`div`,{className:a,style:o,children:s})}var ci=[`#fbdf88`,`#77fbf5`],li=[270,400,380,420,300,410,400,330,210,290],ui=O.div`
  width: 100%;
  height: 100%;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  grid-template-rows: 2fr repeat(2, minmax(0, 1fr));
  gap: 16px;
`,di=O.div`
  display: flex;
  flex-direction: column;
  justify-content: space-evenly;
`,fi=O.div`
  font-size: 12px;
  color: rgba(0, 0, 0, 0.7);
`,pi=O(si)`
  display: flex;
  align-items: baseline;
  gap: 4px;
  font-size: 28px;
  font-weight: 600;
  color: #ea580c;

  &::after {
    content: "";
    display: inline-block;
    font-size: 12px;
    color: rgba(0, 0, 0, 0.7);
    font-weight: normal;
  }
`,mi=O.div`
  display: flex;
  align-items: center;
`,hi=O(si)`
  font-size: 20px;
  font-weight: 600;
  margin-left: 16px;
  color: #ea580c;
`,gi=O.svg.attrs({viewBox:`0 0 1024 1024`,width:`1em`,height:`1em`,fill:ci[0],children:(0,$.jsx)(`path`,{d:`M597.479619 154.063238V852.358095h52.150857V320.658286l169.252572 58.88a56.32 56.32 0 0 1 25.795047 42.959238l0.170667 4.388571V852.358095H902.095238V926.47619H121.904762v-74.093714h56.953905v-566.613333c0-19.456 10.166857-37.546667 26.843428-47.85981l304.444953-131.705904c38.034286-23.503238 87.332571 3.510857 87.332571 47.859809zM471.771429 482.816l-167.107048 68.266667v80.115809l167.107048-68.242286v-80.14019z m0-175.225905L304.664381 377.904762v80.530286l167.107048-70.339048v-80.457143z`})})`
  vertical-align: middle;
  margin-right: 4px;
`;function _i(){return(0,$.jsxs)(ui,{children:[(0,$.jsx)(Ee,{use:[xe],option:{tooltip:{trigger:`axis`,axisPointer:{type:`shadow`},textStyle:{color:`#fff`},backgroundColor:`rgba(251, 223, 136,0.3)`,borderColor:ci[0],borderWidth:1,borderRadius:8},grid:{top:16,bottom:16,left:16,right:16,outerBoundsMode:`same`},calculable:!0,xAxis:{show:!1,data:li,boundaryGap:!1},yAxis:{show:!1,type:`value`},series:{name:`series1`,type:`line`,symbol:`none`,itemStyle:{color:ci[0]},areaStyle:{color:{type:`linear`,x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:ci[0]},{offset:1,color:`rgba(255,255,255,0.1)`}],global:!1}},data:li}}}),(0,$.jsxs)(di,{children:[(0,$.jsx)(fi,{children:``}),(0,$.jsx)(pi,{delay:1.5,value:99608,options:{minimumFractionDigits:2,maximumFractionDigits:2}})]}),Array.from({length:4},(e,t)=>(0,$.jsxs)(mi,{children:[(0,$.jsx)(gi,{}),``,(0,$.jsx)(hi,{delay:1.5,value:7792,options:{maximumFractionDigits:0}})]},t))]})}var vi=[],yi=[{name:``,value:20},{name:``,value:10},{name:``,value:30},{name:``,value:40}],bi=[`#fbdf88`,`#ffa800`,`#ff5b00`,`#ff3000`];for(let e=0;e<yi.length;e++)vi.push({value:yi[e].value,name:yi[e].name,itemStyle:{borderWidth:5,shadowBlur:20,borderColor:bi[e],shadowColor:bi[e]}},{value:2,name:``,itemStyle:{color:`rgba(0, 0, 0, 0)`,borderColor:`rgba(0, 0, 0, 0)`,borderWidth:0}});var xi=[{name:``,type:`pie`,center:[`30%`,`50%`],radius:[75,80],label:{show:!1},labelLine:{show:!1},itemStyle:{label:{show:!1,position:`outside`,color:`#ddd`},labelLine:{show:!1}},data:vi}];function Si(){return yt(()=>{},3e3,!0),(0,$.jsx)(Ee,{use:[br],option:{color:bi[0],tooltip:{show:!1},legend:{icon:`circle`,orient:`vertical`,data:[``,``,``,``],top:`middle`,right:`10%`,textStyle:{color:`#000000`},itemGap:20},series:xi}})}var Ci=[3e3,2e3,4e3,5e3,4500],wi=[`#fbdf88`,`#ea580c`],Ti=[`50`,`50100`,`100500`,`5001000`,`1000`];function Ei(){let e=(0,W.useRef)(null),t=(0,W.useRef)(0);return yt(()=>{e.current&&(e.current?.dispatchAction({type:`showTip`,seriesIndex:0,dataIndex:t.current}),t.current=(t.current+1)%Ci.length)},3e3,!0),(0,$.jsx)(Ee,{ref:e,use:[nt],option:{tooltip:{trigger:`axis`,backgroundColor:`rgba(234, 88, 12,0.3)`,borderColor:wi[1],borderWidth:1,borderRadius:8,textStyle:{color:`#fff`,fontSize:13,align:`left`},axisPointer:{type:`line`,lineStyle:{width:1,type:`dotted`,color:wi[0]}}},grid:{top:`20%`,bottom:`5%`,left:10,right:10,outerBoundsMode:`same`},xAxis:{type:`category`,axisLine:{lineStyle:{color:`rgba(0, 0, 0, 0.1)`}},axisLabel:{interval:0,color:`rgba(0, 0, 0, 0.6)`},axisTick:{show:!1},data:Ti},yAxis:{type:`value`,splitLine:{show:!1},axisLine:{show:!1},axisLabel:{color:`rgba(0, 0, 0, 0.6)`},axisTick:{show:!1}},series:[{name:``,type:`bar`,barWidth:30,label:{show:!0,position:`top`,color:`rgba(0, 0, 0, 0.8)`},itemStyle:{borderRadius:[15,15,0,0],color:{type:`linear`,x:0,y:0,x2:0,y2:1,colorStops:wi.map((e,t)=>({offset:t,color:e})),global:!1}},data:Ci}]}})}var Di=O.div`
  flex: 1;
  min-height: 0;
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  grid-template-rows: repeat(6, minmax(0, 1fr));
  gap: 20px;
  padding: 20px;
`,Oi=O.div`
  position: relative;
  background: rgba(255, 245, 232, 0.65);
  border: 1px solid rgba(255, 145, 0, 0.3);
  position: relative;
  padding: 15px;
  backdrop-filter: blur(4px);
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  pointer-events: auto;
  z-index: 9999;

  &::before {
    content: "";
    position: absolute;
    top: -1px;
    left: -1px;
    width: 10px;
    height: 10px;
    border-top: 2px solid #ea580c;
    border-left: 2px solid #ea580c;
    transition: all 0.3s ease;
    pointer-events: none;
  }

  &::after {
    content: "";
    position: absolute;
    bottom: -1px;
    right: -1px;
    width: 10px;
    height: 10px;
    border-bottom: 2px solid #ea580c;
    border-right: 2px solid #ea580c;
    transition: all 0.3s ease;
    pointer-events: none;
  }

  &:hover::before,
  &:hover::after {
    width: 100%;
    height: 100%;
    opacity: 0.5;
  }
`,ki=O.div`
  font-size: 36px;
  letter-spacing: 8px;
  color: #fff;
  text-shadow: 0 8px 10px rgba(255, 145, 0, 0.8);
  font-weight: 700;
  background: linear-gradient(to bottom, #ea580c, #ff9100);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-align: center;

  &::after {
    content: "SICHUAN SMART BRAIN";
    display: block;
    font-size: 12px;
    letter-spacing: 12px;
    text-align: center;
    color: rgba(255, 145, 0, 0.6);
    margin-top: -5px;
    -webkit-text-fill-color: rgba(255, 145, 0, 0.6);
  }
`,Ai=O.div`
  position: relative;
  width: 100%;
  height: 80px;
  background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 -2 1920 84'><path d='M0,0 L1920,0 L1920,60 L1300,60 L1250,80 L670,80 L620,60 L0,60 Z' fill='rgb(255, 245, 232)' stroke='rgb(234, 88, 12)' stroke-width='2'/></svg>");
  background-repeat: no-repeat;
  background-size: 100%;
  background-position: bottom;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5;
`,ji=O.div`
  font-size: 18px;
  margin-bottom: 10px;
  padding-left: 10px;
  border-left: 4px solid #fdb961;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: #5a4a42;

  span {
    font-size: 10px;
    color: rgba(0, 0, 0, 0.4);
    font-weight: normal;
  }
`,Mi=O.div`
  position: absolute;
  pointer-events: auto;
  bottom: 20px;
  left: 50%;
  display: flex;
  gap: 20px;
`,Ni=O.a.attrs({children:(0,$.jsx)(`svg`,{width:`1em`,height:`1em`,viewBox:`0 0 22 22`,version:`1.1`,children:(0,$.jsx)(`g`,{stroke:`none`,strokeWidth:`1`,fill:`none`,fillRule:`evenodd`,children:(0,$.jsx)(`g`,{transform:`translate(-262.000000, -2480.000000)`,fill:`#000000`,children:(0,$.jsx)(`g`,{transform:`translate(252.000000, 2470.000000)`,children:(0,$.jsx)(`path`,{d:`M29.9006449,27.904446 C28.5016932,29.8668872 26.6944882,31.2248797 24.4790301,31.9784237 C24.2211218,32.0272886 24.0325745,31.9931534 23.9133882,31.876018 C23.7942019,31.7588827 23.7346171,31.6119968 23.7346338,31.4353603 L23.7346338,28.3376019 C23.7346338,27.3880159 23.4865017,26.6930482 22.9902375,26.2526987 C23.5347812,26.1938141 24.024319,26.1058042 24.458851,25.9886688 C24.893383,25.8715335 25.3422785,25.680801 25.8055376,25.4164714 C26.2687966,25.1521418 26.6556591,24.8267354 26.9661251,24.4402521 C27.276591,24.0537688 27.5296112,23.5398222 27.7251857,22.8984123 C27.9207602,22.2570024 28.0185475,21.5203805 28.0185475,20.6885464 C28.0185475,19.504056 27.6414612,18.4959023 26.8872886,17.6640854 C27.240536,16.7733669 27.2023419,15.7752328 26.7727063,14.6696833 C26.5050218,14.5813565 26.1181593,14.6352226 25.6121189,14.8312818 C25.1060784,15.0273409 24.6669591,15.2428141 24.2947609,15.4777015 L23.7502256,15.8300324 C22.8622108,15.5757225 21.9454689,15.4485675 21,15.4485675 C20.0545311,15.4485675 19.1377892,15.5757225 18.2497744,15.8300324 C18.0969813,15.7223001 17.8940788,15.5901353 17.641067,15.433538 C17.3880551,15.2769408 16.9892689,15.0884007 16.4447085,14.8679176 C15.9001481,14.6474346 15.4894467,14.5813479 15.2126043,14.6696576 C14.7921266,15.7758408 14.7588206,16.7739749 15.1126863,17.6640597 C14.3585137,18.4958938 13.9814275,19.5040475 13.9814275,20.6885208 C13.9814275,21.5203548 14.0792147,22.2544676 14.2747892,22.8908591 C14.4703637,23.5272505 14.720944,24.0411971 15.0265302,24.4326988 C15.3321164,24.8242005 15.7165391,25.1521076 16.1797981,25.41642 C16.6430571,25.6807325 17.0919527,25.871465 17.5264847,25.9886174 C17.9610167,26.1057699 18.4505545,26.1937799 18.9950982,26.2526473 C18.6131238,26.60467 18.3790461,27.1085884 18.292865,27.7644025 C18.0924107,27.8621152 17.8775846,27.935404 17.6483866,27.984269 C17.4191886,28.0331339 17.1469167,28.0575663 16.831571,28.0575663 C16.5162253,28.0575663 16.203612,27.9523346 15.8937309,27.7418712 C15.5838499,27.5314078 15.3189144,27.225424 15.0989244,26.8239198 C14.9174043,26.5107253 14.6857747,26.2564154 14.4040358,26.0609899 C14.1222969,25.8655645 13.8860801,25.7481209 13.6953854,25.708659 L13.4084408,25.6644956 C13.2079866,25.6644956 13.069557,25.6864188 12.9931521,25.7302654 C12.9167472,25.7741119 12.8929083,25.8304873 12.9216353,25.8993914 C12.9503623,25.9682956 12.9934529,26.0368829 13.050907,26.1051533 C13.1083611,26.1734238 13.1703941,26.2319915 13.2370061,26.2808564 L13.336924,26.3541538 C13.5471712,26.4518665 13.7549701,26.6378974 13.9603209,26.9122466 C14.1656716,27.1865958 14.3160164,27.4362043 14.4113555,27.661072 L14.554364,27.9983735 C14.67843,28.3704354 14.8886689,28.6714094 15.1850804,28.9012955 C15.481492,29.1311815 15.8014334,29.2780674 16.1449045,29.3419532 C16.4883756,29.405839 16.8202406,29.4399742 17.1404995,29.4443589 C17.4607584,29.4487435 17.7256939,29.4315218 17.935306,29.3926936 L18.2644137,29.3335008 C18.2644137,29.7055627 18.2668619,30.1412107 18.2717584,30.6404447 C18.2766548,31.1396787 18.279103,31.4040083 18.279103,31.4334334 C18.279103,31.6094533 18.21707,31.7563392 18.093004,31.8740912 C17.9689379,31.9918431 17.7779507,32.0259784 17.5200424,31.9764969 C15.3045843,31.22297 13.4973793,29.8649774 12.0984276,27.9025191 C10.6994759,25.9400608 10,23.7305118 10,21.2738721 C10,19.2281225 10.4916769,17.3417791 11.4750308,15.6148418 C12.4583846,13.8879045 13.7928551,12.5202092 15.4784422,11.5117558 C17.1640293,10.5033024 19.0045486,9.99938397 21,10.0000006 C22.9954514,10.0006172 24.8359707,10.5045356 26.5215578,11.5117558 C28.2071449,12.518976 29.5416154,13.8866713 30.5249692,15.6148418 C31.5083231,17.3430123 32,19.2293557 32,21.2738721 C31.9990725,23.7324558 31.2995966,25.9420048 29.9006449,27.904446 Z`})})})})})})`
  position: absolute;
  right: 32px;
  top: 12px;
  width: 36px;
  height: 36px;
  font-size: 36px;
  pointer-events: auto;
`;function Pi(){let e=g(`toBottom`,.6,1),t=g(`toRight`,.8,1.5),n=g(`toRight`,.8,1.6),r=g(`toRight`,.8,1.7),i=g(`toLeft`,.8,1.5),a=g(`toLeft`,.8,1.6),o=g(`toLeft`,.8,1.7),s=g(`toTop`,.8,1.5,`translateX(-50%)`);return(0,W.useEffect)(()=>{s.restart(!0),e.restart(!0),t.restart(!0),n.restart(!0),i.restart(!0),a.restart(!0)},[]),(0,$.jsxs)(v,{children:[(0,$.jsxs)(Ai,{ref:e.ref,children:[(0,$.jsx)(ki,{children:``}),(0,$.jsx)(Ni,{href:`https://github.com/knight-L/datav`,target:`_blank`})]}),(0,$.jsxs)(Di,{children:[(0,$.jsxs)(Oi,{ref:t.ref,style:{gridArea:`1 / 1 / 3 / 2`},children:[(0,$.jsxs)(ji,{children:[`2025`,(0,$.jsx)(`span`,{children:`INDICATOR ANALYSIS`})]}),(0,$.jsx)(ei,{})]}),(0,$.jsxs)(Oi,{ref:n.ref,style:{gridArea:`3 / 1 / 5 / 2`},children:[(0,$.jsxs)(ji,{children:[``,(0,$.jsx)(`span`,{children:`TAX ANALYSIS`})]}),(0,$.jsx)(ii,{})]}),(0,$.jsxs)(Oi,{ref:r.ref,style:{gridArea:`5 / 1 / 7 / 2`},children:[(0,$.jsxs)(ji,{children:[``,(0,$.jsx)(`span`,{children:`PENALTY INFORMATION`})]}),(0,$.jsx)(oi,{})]}),(0,$.jsxs)(Oi,{ref:i.ref,style:{gridArea:`1 / 4 / 3 / 5`},children:[(0,$.jsxs)(ji,{children:[``,(0,$.jsx)(`span`,{children:`REVENUE STATISTICS`})]}),(0,$.jsx)(_i,{})]}),(0,$.jsxs)(Oi,{ref:a.ref,style:{gridArea:`3 / 4 / 5 / 5`},children:[(0,$.jsxs)(ji,{children:[``,(0,$.jsx)(`span`,{children:`ENERGY CONSUMPTION ANALYSIS`})]}),(0,$.jsx)(Si,{})]}),(0,$.jsxs)(Oi,{ref:o.ref,style:{gridArea:`5 / 4 / 7 / 5`},children:[(0,$.jsxs)(ji,{children:[``,(0,$.jsx)(`span`,{children:`TAX ANALYSIS`})]}),(0,$.jsx)(Ei,{})]}),(0,$.jsx)(Mi,{ref:s.ref})]})]})}function Fi(){let e=(0,W.useRef)(null),t=(0,W.useRef)(null);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`ambientLight`,{intensity:2}),(0,$.jsx)(`spotLight`,{ref:e,intensity:1500,position:[5,15,5],distance:50,color:`#fff5e8`}),(0,$.jsx)(`spotLight`,{ref:t,intensity:1500,position:[-5,15,5],distance:50,color:`#fff5e8`})]})}function Ii(e){let{ref:t,args:n,bbox:r,children:i,...a}=e,o=(0,W.useRef)(null);return(0,W.useImperativeHandle)(t,()=>o.current),(0,W.useLayoutEffect)(()=>{let{geometry:e}=o.current,t=e.attributes.position,n=r.max.x-r.min.x,i=r.max.y-r.min.y,a=[],s=0,c=0,l=0,u=0;for(let e=0;e<t.count;e++)s=t.getX(e),c=t.getY(e),l=(s-r.min.x)/n,u=(c-r.min.y)/i,a.push(l,u);e.setAttribute(`uv`,new ye(a,2))}),(0,$.jsxs)(`mesh`,{ref:o,...a,children:[(0,$.jsx)(`shapeGeometry`,{attach:`geometry`,args:n}),i]})}var Li=Ii,Ri=O.div`
  background: rgba(255, 245, 232, 0.7);
  backdrop-filter: blur(10px);
  border-radius: 8px;
  padding: 12px 16px;
  color: #656565;
  font-size: 12px;
  pointer-events: none;
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  min-width: 120px;
`,zi=O.div`
  font-weight: bold;
  margin-bottom: 8px;
  color: #ea580c;
`,Bi=O.div`
  display: flex;
  justify-content: space-between;
  margin-bottom: 4px;

  &:last-child {
    margin-bottom: 0;
  }
`;function Vi(e){let{data:t,position:n,visible:r}=e;return r?(0,$.jsx)(nn,{center:!0,position:n,distanceFactor:10,zIndexRange:[-499],style:{pointerEvents:`none`},children:(0,$.jsxs)(Ri,{children:[(0,$.jsx)(zi,{children:t.city}),(0,$.jsxs)(Bi,{children:[(0,$.jsx)(`span`,{children:`:`}),(0,$.jsxs)(`span`,{children:[t.population,``]})]}),(0,$.jsxs)(Bi,{children:[(0,$.jsx)(`span`,{children:`GDP:`}),(0,$.jsx)(`span`,{children:t.gdp})]}),(0,$.jsxs)(Bi,{children:[(0,$.jsx)(`span`,{children:`:`}),(0,$.jsx)(`span`,{children:t.area})]})]})}):null}var Hi=`/sc-datav/assets/guangquan01-pOZ1glDQ.png`,Ui=`/sc-datav/assets/huiguang-DZ0AatIE.png`;function Wi(e){let{position:t,value:n=Math.floor(Math.random()*1e3)+100,children:r}=e,i=.7;4*i;let a={x:1,y:2,z:3},o=15357964,s=(0,W.useRef)(null),c=qe(Hi),l=qe(Ui,e=>{e.colorSpace=H,e.wrapS=e.wrapT=It}),u=(0,W.useMemo)(()=>2.8*(n/1e3),[]);return C(()=>{s.current.rotation.z+=.05}),(0,$.jsxs)(`group`,{position:t,children:[(0,$.jsxs)(`mesh`,{renderOrder:5,position:[0,0,u/2],raycast:()=>null,children:[(0,$.jsxs)(`mesh`,{renderOrder:10,"rotation-x":Math.PI/2,raycast:()=>null,children:[(0,$.jsx)(`planeGeometry`,{args:[.35,u]}),(0,$.jsx)(`meshBasicMaterial`,{transparent:!0,color:o,map:l,opacity:.4,depthWrite:!1,side:2,blending:2})]}),(0,$.jsxs)(`mesh`,{renderOrder:10,"rotation-x":Math.PI/2,"rotation-y":Math.PI/180*60,raycast:()=>null,children:[(0,$.jsx)(`planeGeometry`,{args:[.35,u]}),(0,$.jsx)(`meshBasicMaterial`,{transparent:!0,color:o,map:l,opacity:.4,depthWrite:!1,side:2,blending:2})]}),(0,$.jsxs)(`mesh`,{renderOrder:10,"rotation-x":Math.PI/2,"rotation-y":Math.PI/180*120,raycast:()=>null,children:[(0,$.jsx)(`planeGeometry`,{args:[.35,u]}),(0,$.jsx)(`meshBasicMaterial`,{transparent:!0,color:o,map:l,opacity:.4,depthWrite:!1,side:2,blending:2})]}),(0,$.jsx)(`boxGeometry`,{args:[.1*i,.1*i,u],translate:[0,0,u/2]}),(0,$.jsx)(`meshBasicMaterial`,{transparent:!0,color:`#ffffff`,opacity:1,depthTest:!1,fog:!1,onBeforeCompile:e=>{e.uniforms={...e.uniforms,uColor1:{value:new mt(16506760)},uColor2:{value:new mt(o)},uDir:{value:a.y},uSize:{value:u}},e.vertexShader=e.vertexShader.replace(`void main() {`,`
                attribute float alpha;
                varying vec3 vPosition;
                varying float vAlpha;
                void main() {
                  vAlpha = alpha;
                  vPosition = position;
              `),e.fragmentShader=e.fragmentShader.replace(`void main() {`,`
                varying vec3 vPosition;
                varying float vAlpha;
                uniform vec3 uColor1;
                uniform vec3 uColor2;
                uniform float uDir;
                uniform float uSize;

                void main() {
              `),e.fragmentShader=e.fragmentShader.replace(`#include <opaque_fragment>`,`
              #ifdef OPAQUE
              diffuseColor.a = 1.0;
              #endif

              // https://github.com/mrdoob/three.js/pull/22425
              #ifdef USE_TRANSMISSION
              diffuseColor.a *= transmissionAlpha + 0.1;
              #endif
              // vec3 gradient = mix(uColor1, uColor2, vPosition.x / 15.0);
              vec3 gradient = vec3(0.0,0.0,0.0);
              if(uDir==1.0){
                gradient = mix(uColor1, uColor2, vPosition.x/ uSize);
              }else if(uDir==2.0){
                gradient = mix(uColor1, uColor2, vPosition.z/ uSize);
              }else if(uDir==3.0){
                gradient = mix(uColor1, uColor2, vPosition.y/ uSize);
              }
              outgoingLight = outgoingLight * gradient;

              gl_FragColor = vec4( outgoingLight, diffuseColor.a  );
              `)}})]}),(0,$.jsxs)(`mesh`,{renderOrder:6,ref:s,raycast:()=>null,children:[(0,$.jsx)(`planeGeometry`,{args:[.5,.5]}),(0,$.jsx)(`meshBasicMaterial`,{transparent:!0,color:16777215,map:c,alphaMap:c,opacity:1,depthTest:!1,fog:!1,blending:2})]}),typeof r==`function`?r?.(u):r]})}var Gi=O(nn)`
  pointer-events: none;
  width: max-content;
  display: flex;
  background: #ffffff;
  border: 1px solid currentColor;
  color: #fdb961;
  font-size: 14px;
  padding-inline: 4px;
  border-radius: 4px;
`;function Ki(e){let{data:t,bbox:n,depth:r,map:i,normalMap:a}=e,o=(0,W.useRef)(null),s=(0,W.useRef)(new M(1,1,1)),[c,l]=(0,W.useState)(!1),u=(0,W.useMemo)(()=>t.points.map(e=>new Nt(e)),[t.points]);return C(()=>{o.current.scale.lerp(s.current.setZ(c?1.5:1),.1)}),rn(c),(0,$.jsxs)(`group`,{ref:o,onPointerOver:e=>(e.stopPropagation(),l(!0)),onPointerOut:()=>l(!1),children:[(0,$.jsx)(Li,{castShadow:!0,receiveShadow:!0,bbox:n,args:[u],position:[0,0,r+.01],children:(0,$.jsx)(`meshStandardMaterial`,{map:i,normalMap:a})}),(0,$.jsxs)(`mesh`,{children:[(0,$.jsx)(`extrudeGeometry`,{args:[u,{depth:r,steps:1,bevelEnabled:!1}]}),(0,$.jsx)(`meshStandardMaterial`,{transparent:!0,opacity:0,metalness:.2,roughness:.5,side:2})]}),(0,$.jsxs)(`lineSegments`,{position:[0,.01,r+.02],raycast:()=>null,children:[(0,$.jsx)(`edgesGeometry`,{args:[new le(u)]}),(0,$.jsx)(`lineBasicMaterial`,{transparent:!0,opacity:0,color:`#ffffff`})]}),(0,$.jsx)(Wi,{position:t.cityId,value:Xr[t.city]?.population??0,children:e=>(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(Gi,{center:!0,position:[0,0,e+.2],distanceFactor:10,zIndexRange:[-900],children:t.city}),(0,$.jsx)(Vi,{data:{city:t.city,...Xr[t.city]},position:[0,0,e+2],visible:c})]})})]})}function qi(e){let{data:t,depth:n=1}=e,r=(0,W.useRef)(null),i=D(e=>e.camera),[a,o]=qe([Ge,ht],e=>e.forEach(e=>{e.wrapS=e.wrapT=It})),s=(0,W.useMemo)(()=>we().center(t.features[0].properties.centroid).translate([0,0]),[t]),{regions:c,bbox:l}=(0,W.useMemo)(()=>{let e=[],n=new de,r=e=>{let[t,r]=s(e),i=new Je(t,-r);return n.expandByPoint(i),i};return t.features.forEach(t=>{let n=t.geometry.coordinates.reduce((e,t)=>[...e,...t.map(e=>e.map(r))],[]),[i,a]=s(t.properties.centroid??t.properties.center);e.push({city:t.properties.name,cityId:[i,-a,1.1],points:n})}),{regions:e,bbox:n}},[s,t]);return(0,W.useLayoutEffect)(()=>{if(!r.current)return;let e=P.timeline({paused:!0});return e.add(P.to(i.position,{x:5,y:10,z:10,duration:2.5,ease:`circ.out`})),e.add(e.to(r.current.scale,{x:.5,y:.5,z:.5,duration:1,ease:`circ.out`},2.5)),r.current.traverse(t=>{(t instanceof Ae||t instanceof _t)&&e.add(e.to(t.material,{opacity:1,duration:1,ease:`circ.out`},2.5),3)}),e.play(),()=>{e.kill()}},[i]),(0,$.jsx)(Ze,{top:!0,children:(0,$.jsx)(`group`,{ref:r,rotation:[-Math.PI/2,0,0],scale:[.5,.5,.01],position:[0,0,0],children:c.map((e,t)=>(0,$.jsx)(Ki,{depth:n,bbox:l,data:e,map:a,normalMap:o},t))})})}function Ji(){let e=(0,W.useRef)(null),t=(0,W.useRef)(null);return C((n,r)=>{e.current.rotation.y=Math.cos(n.clock.elapsedTime/2)/2,e.current.rotation.x=Math.sin(n.clock.elapsedTime/2)/2,t.current.rotation.y-=r/5}),(0,$.jsx)(`group`,{ref:e,children:(0,$.jsxs)(Sn,{material:Re,children:[(0,$.jsx)(wn,{ref:t,position:[5,5,0],volume:1,opacity:.5}),(0,$.jsx)(wn,{position:[-5,5,5],volume:.5,opacity:.5})]})})}var Yi=`/sc-datav/assets/rotationBorder1-CAivvQWo.png`,Xi=`/sc-datav/assets/rotationBorder2-B1TYmmxk.png`,Zi=`/sc-datav/assets/gaoguang1-DEGqXsnZ.png`,Qi=`/sc-datav/assets/grid-CwTkbZjd.png`,$i=`/sc-datav/assets/gridBlack-D2rBj0ur.png`;function ea(){let e=(0,W.useRef)({uTime:{value:0},uSpeed:{value:10},uWidth:{value:20},uColor:{value:new mt(15357964)},uDir:{value:2}}),t=(0,W.useRef)(null),n=(0,W.useRef)(null),r=qe(Zi,e=>{e.colorSpace=H,e.wrapS=e.wrapT=It,e.repeat.set(1,1)}),[i,a]=qe([Qi,$i],e=>e.forEach(e=>{e.wrapS=e.wrapT=It,e.repeat.set(80,80)})),[o,s]=qe([Yi,Xi]);return C((r,i)=>{e.current.uTime.value+=i,e.current.uTime.value>100/10&&(e.current.uTime.value=0),t.current.rotation.z+=.001,n.current.rotation.z+=-.004}),(0,$.jsxs)(`group`,{rotation:[-Math.PI/2,0,0],position:[0,-.1,0],children:[(0,$.jsxs)(`mesh`,{children:[(0,$.jsx)(`planeGeometry`,{args:[20,20]}),(0,$.jsx)(`meshBasicMaterial`,{transparent:!0,blending:1,map:r,color:`#fbdf88`})]}),(0,$.jsxs)(`mesh`,{ref:t,position:[0,0,.01],children:[(0,$.jsx)(`planeGeometry`,{args:[16,16]}),(0,$.jsx)(`meshBasicMaterial`,{transparent:!0,map:o,color:`#fbdf88`,opacity:.2,depthWrite:!1,blending:1})]}),(0,$.jsxs)(`mesh`,{ref:n,position:[0,0,.01],children:[(0,$.jsx)(`planeGeometry`,{args:[15,15]}),(0,$.jsx)(`meshBasicMaterial`,{transparent:!0,map:s,color:`#fbdf88`,opacity:.4,depthWrite:!1,blending:1})]}),(0,$.jsxs)(`mesh`,{position:[0,0,.01],children:[(0,$.jsx)(`planeGeometry`,{args:[100,100]}),(0,$.jsx)(`meshBasicMaterial`,{transparent:!0,map:i,alphaMap:a,color:`#fbdf88`,opacity:.1,depthWrite:!1,blending:1})]}),(0,$.jsxs)(`mesh`,{position:[0,0,.01],children:[(0,$.jsx)(`planeGeometry`,{args:[100,100]}),(0,$.jsx)(`meshBasicMaterial`,{transparent:!0,map:i,alphaMap:a,color:`#ea580c`,opacity:.5,depthWrite:!1,blending:1,onBeforeCompile:t=>{t.uniforms={...t.uniforms,...e.current},t.vertexShader=t.vertexShader.replace(`void main() {`,`
            varying vec3 vPosition;
            void main(){
              vPosition = position;
          `),t.fragmentShader=t.fragmentShader.replace(`void main() {`,`
            uniform float uTime;
            uniform float uSpeed;
            uniform float uWidth;
            uniform vec3 uColor;
            uniform float uDir;
            varying vec3 vPosition;
            
            void main(){
          `),t.fragmentShader=t.fragmentShader.replace(`#include <opaque_fragment>`,`
            #ifdef OPAQUE
            diffuseColor.a = 1.0;
            #endif
            
            #ifdef USE_TRANSMISSION
            diffuseColor.a *= material.transmissionAlpha;
            #endif
            
            float r = uTime * uSpeed;
            //
            float w = 0.0; 
            if(w>uWidth){
              w = uWidth;
            }else{
              w = uTime * 5.0;
            }
            //
            vec2 center = vec2(0.0, 0.0); 
            // 

            float rDistance = distance(vPosition.xz, center);
            if(uDir==2.0){
              rDistance = distance(vPosition.xy, center);
            }
            if(rDistance > r && rDistance < r + 2.0 * w) {
              float per = 0.0;
              if(rDistance < r + w) {
                per = (rDistance - r) / w;
                outgoingLight = mix(outgoingLight, uColor, per);
                // 0->
                float alphaV = mix(0.0,diffuseColor.a,per);
                gl_FragColor = vec4(outgoingLight,  alphaV);
              } else {
                per = (rDistance - r - w) / w;
                outgoingLight = mix(uColor, outgoingLight, per);
                // 0->
                float alphaV = mix(diffuseColor.a,0.0,per);
                gl_FragColor = vec4(outgoingLight,  alphaV);
              }
            } else {
              gl_FragColor = vec4(outgoingLight, 0.0);
            }
          `)}})]})]})}var ta=at,na=St,ra=O.div`
  position: relative;
  width: 100vw;
  height: 100vh;
`,ia=O.div`
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
`;function aa(){return(0,$.jsxs)(ra,{children:[(0,$.jsx)(ia,{children:(0,$.jsxs)(ee,{flat:!0,shadows:!0,camera:{position:[0,10,20],fov:50},dpr:[1,2],children:[(0,$.jsx)(`color`,{attach:`background`,args:[`#fff5e8`]}),(0,$.jsx)(Fi,{}),(0,$.jsx)(Ji,{}),(0,$.jsx)(W.Suspense,{fallback:null,children:(0,$.jsx)(qi,{data:ta,outlineData:na})}),(0,$.jsx)(ea,{}),(0,$.jsx)(pn,{opacity:.2,scale:20,blur:.01,far:10,resolution:256,color:`#000000`,position:[0,-.01,0]}),(0,$.jsx)(s,{enablePan:!0,enableZoom:!0,enableRotate:!0,zoomSpeed:.3,minDistance:10,maxDistance:20,maxPolarAngle:1.5})]})}),(0,$.jsx)(Pi,{}),(0,$.jsx)(cn,{})]})}export{aa as default};