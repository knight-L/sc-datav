import{s as e,u as t}from"./index-CvRTuVEO.js";import{An as n,Gn as r,Kn as i,Mn as a,_n as o,c as s,dn as c,f as l,in as u,jt as d,nn as f,rn as p,t as m,u as h}from"./extends-CNVXk0FS.js";var g=t(e(),1),_=e=>e;function v(e,t=_){let n=g.useSyncExternalStore(e.subscribe,g.useCallback(()=>t(e.getState()),[e,t]),g.useCallback(()=>t(e.getInitialState()),[e,t]));return g.useDebugValue(n),n}var y=e=>{let t=l(e),n=e=>v(t,e);return Object.assign(n,t),n},b=(e=>e?y(e):y),x=Object.defineProperty,S=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,C=(e,t,n)=>(S(e,typeof t==`symbol`?t:t+``,n),n),w=class{constructor(){C(this,`_listeners`)}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let n=this._listeners[e];if(n!==void 0){let e=n.indexOf(t);e!==-1&&n.splice(e,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}},T=Object.defineProperty,E=(e,t,n)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,D=(e,t,n)=>(E(e,typeof t==`symbol`?t:t+``,n),n),O=new o,ee=new u,te=Math.cos(70*(Math.PI/180)),ne=(e,t)=>(e%t+t)%t,k=class extends w{constructor(e,t){super(),D(this,`object`),D(this,`domElement`),D(this,`enabled`,!0),D(this,`target`,new i),D(this,`minDistance`,0),D(this,`maxDistance`,1/0),D(this,`minZoom`,0),D(this,`maxZoom`,1/0),D(this,`minPolarAngle`,0),D(this,`maxPolarAngle`,Math.PI),D(this,`minAzimuthAngle`,-1/0),D(this,`maxAzimuthAngle`,1/0),D(this,`enableDamping`,!1),D(this,`dampingFactor`,.05),D(this,`enableZoom`,!0),D(this,`zoomSpeed`,1),D(this,`enableRotate`,!0),D(this,`rotateSpeed`,1),D(this,`enablePan`,!0),D(this,`panSpeed`,1),D(this,`screenSpacePanning`,!0),D(this,`keyPanSpeed`,7),D(this,`zoomToCursor`,!1),D(this,`autoRotate`,!1),D(this,`autoRotateSpeed`,2),D(this,`reverseOrbit`,!1),D(this,`reverseHorizontalOrbit`,!1),D(this,`reverseVerticalOrbit`,!1),D(this,`keys`,{LEFT:`ArrowLeft`,UP:`ArrowUp`,RIGHT:`ArrowRight`,BOTTOM:`ArrowDown`}),D(this,`mouseButtons`,{LEFT:d.ROTATE,MIDDLE:d.DOLLY,RIGHT:d.PAN}),D(this,`touches`,{ONE:a.ROTATE,TWO:a.DOLLY_PAN}),D(this,`target0`),D(this,`position0`),D(this,`zoom0`),D(this,`_domElementKeyEvents`,null),D(this,`getPolarAngle`),D(this,`getAzimuthalAngle`),D(this,`setPolarAngle`),D(this,`setAzimuthalAngle`),D(this,`getDistance`),D(this,`getZoomScale`),D(this,`listenToKeyEvents`),D(this,`stopListenToKeyEvents`),D(this,`saveState`),D(this,`reset`),D(this,`update`),D(this,`connect`),D(this,`dispose`),D(this,`dollyIn`),D(this,`dollyOut`),D(this,`getScale`),D(this,`setScale`),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>_.phi,this.getAzimuthalAngle=()=>_.theta,this.setPolarAngle=e=>{let t=ne(e,2*Math.PI),n=_.phi;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-n);2*Math.PI-r<r&&(t<n?t+=2*Math.PI:n+=2*Math.PI),v.phi=t-n,o.update()},this.setAzimuthalAngle=e=>{let t=ne(e,2*Math.PI),n=_.theta;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-n);2*Math.PI-r<r&&(t<n?t+=2*Math.PI:n+=2*Math.PI),v.theta=t-n,o.update()},this.getDistance=()=>o.object.position.distanceTo(o.target),this.listenToKeyEvents=e=>{e.addEventListener(`keydown`,Z),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener(`keydown`,Z),this._domElementKeyEvents=null},this.saveState=()=>{o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object.zoom},this.reset=()=>{o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(s),o.update(),h=m.NONE},this.update=(()=>{let t=new i,n=new i(0,1,0),r=new c().setFromUnitVectors(e.up,n),a=r.clone().invert(),l=new i,u=new c,d=2*Math.PI;return function(){let c=o.object.position;r.setFromUnitVectors(e.up,n),a.copy(r).invert(),t.copy(c).sub(o.target),t.applyQuaternion(r),_.setFromVector3(t),o.autoRotate&&h===m.NONE&&L(ie()),o.enableDamping?(_.theta+=v.theta*o.dampingFactor,_.phi+=v.phi*o.dampingFactor):(_.theta+=v.theta,_.phi+=v.phi);let x=o.minAzimuthAngle,S=o.maxAzimuthAngle;isFinite(x)&&isFinite(S)&&(x<-Math.PI?x+=d:x>Math.PI&&(x-=d),S<-Math.PI?S+=d:S>Math.PI&&(S-=d),x<=S?_.theta=Math.max(x,Math.min(S,_.theta)):_.theta=_.theta>(x+S)/2?Math.max(x,_.theta):Math.min(S,_.theta)),_.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,_.phi)),_.makeSafe(),o.enableDamping===!0?o.target.addScaledVector(b,o.dampingFactor):o.target.add(b),o.zoomToCursor&&N||o.object.isOrthographicCamera?_.radius=G(_.radius):_.radius=G(_.radius*y),t.setFromSpherical(_),t.applyQuaternion(a),c.copy(o.target).add(t),o.object.matrixAutoUpdate||o.object.updateMatrix(),o.object.lookAt(o.target),o.enableDamping===!0?(v.theta*=1-o.dampingFactor,v.phi*=1-o.dampingFactor,b.multiplyScalar(1-o.dampingFactor)):(v.set(0,0,0),b.set(0,0,0));let C=!1;if(o.zoomToCursor&&N){let n=null;if(o.object instanceof p&&o.object.isPerspectiveCamera){let e=t.length();n=G(e*y);let r=e-n;o.object.position.addScaledVector(re,r),o.object.updateMatrixWorld()}else if(o.object.isOrthographicCamera){let e=new i(M.x,M.y,0);e.unproject(o.object),o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/y)),o.object.updateProjectionMatrix(),C=!0;let r=new i(M.x,M.y,0);r.unproject(o.object),o.object.position.sub(r).add(e),o.object.updateMatrixWorld(),n=t.length()}else console.warn(`WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled.`),o.zoomToCursor=!1;n!==null&&(o.screenSpacePanning?o.target.set(0,0,-1).transformDirection(o.object.matrix).multiplyScalar(n).add(o.object.position):(O.origin.copy(o.object.position),O.direction.set(0,0,-1).transformDirection(o.object.matrix),Math.abs(o.object.up.dot(O.direction))<te?e.lookAt(o.target):(ee.setFromNormalAndCoplanarPoint(o.object.up,o.target),O.intersectPlane(ee,o.target))))}else o.object instanceof f&&o.object.isOrthographicCamera&&(C=y!==1,C&&(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/y)),o.object.updateProjectionMatrix()));return y=1,N=!1,C||l.distanceToSquared(o.object.position)>g||8*(1-u.dot(o.object.quaternion))>g?(o.dispatchEvent(s),l.copy(o.object.position),u.copy(o.object.quaternion),C=!1,!0):!1}})(),this.connect=e=>{o.domElement=e,o.domElement.style.touchAction=`none`,o.domElement.addEventListener(`contextmenu`,De),o.domElement.addEventListener(`pointerdown`,xe),o.domElement.addEventListener(`pointercancel`,X),o.domElement.addEventListener(`wheel`,we)},this.dispose=()=>{var e,t,n,r,i,a;o.domElement&&(o.domElement.style.touchAction=`auto`),(e=o.domElement)==null||e.removeEventListener(`contextmenu`,De),(t=o.domElement)==null||t.removeEventListener(`pointerdown`,xe),(n=o.domElement)==null||n.removeEventListener(`pointercancel`,X),(r=o.domElement)==null||r.removeEventListener(`wheel`,we),(i=o.domElement)==null||i.ownerDocument.removeEventListener(`pointermove`,Y),(a=o.domElement)==null||a.ownerDocument.removeEventListener(`pointerup`,X),o._domElementKeyEvents!==null&&o._domElementKeyEvents.removeEventListener(`keydown`,Z)};let o=this,s={type:`change`},l={type:`start`},u={type:`end`},m={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},h=m.NONE,g=1e-6,_=new n,v=new n,y=1,b=new i,x=new r,S=new r,C=new r,w=new r,T=new r,E=new r,k=new r,A=new r,j=new r,re=new i,M=new r,N=!1,P=[],F={};function ie(){return 2*Math.PI/60/60*o.autoRotateSpeed}function I(){return .95**o.zoomSpeed}function L(e){o.reverseOrbit||o.reverseHorizontalOrbit?v.theta+=e:v.theta-=e}function R(e){o.reverseOrbit||o.reverseVerticalOrbit?v.phi+=e:v.phi-=e}let z=(()=>{let e=new i;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),b.add(e)}})(),ae=(()=>{let e=new i;return function(t,n){o.screenSpacePanning===!0?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(o.object.up,e)),e.multiplyScalar(t),b.add(e)}})(),B=(()=>{let e=new i;return function(t,n){let r=o.domElement;if(r&&o.object instanceof p&&o.object.isPerspectiveCamera){let i=o.object.position;e.copy(i).sub(o.target);let a=e.length();a*=Math.tan(o.object.fov/2*Math.PI/180),z(2*t*a/r.clientHeight,o.object.matrix),ae(2*n*a/r.clientHeight,o.object.matrix)}else r&&o.object instanceof f&&o.object.isOrthographicCamera?(z(t*(o.object.right-o.object.left)/o.object.zoom/r.clientWidth,o.object.matrix),ae(n*(o.object.top-o.object.bottom)/o.object.zoom/r.clientHeight,o.object.matrix)):(console.warn(`WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.`),o.enablePan=!1)}})();function V(e){o.object instanceof p&&o.object.isPerspectiveCamera||o.object instanceof f&&o.object.isOrthographicCamera?y=e:(console.warn(`WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.`),o.enableZoom=!1)}function H(e){V(y/e)}function U(e){V(y*e)}function W(e){if(!o.zoomToCursor||!o.domElement)return;N=!0;let t=o.domElement.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,i=t.width,a=t.height;M.x=n/i*2-1,M.y=-(r/a)*2+1,re.set(M.x,M.y,1).unproject(o.object).sub(o.object.position).normalize()}function G(e){return Math.max(o.minDistance,Math.min(o.maxDistance,e))}function K(e){x.set(e.clientX,e.clientY)}function oe(e){W(e),k.set(e.clientX,e.clientY)}function q(e){w.set(e.clientX,e.clientY)}function se(e){S.set(e.clientX,e.clientY),C.subVectors(S,x).multiplyScalar(o.rotateSpeed);let t=o.domElement;t&&(L(2*Math.PI*C.x/t.clientHeight),R(2*Math.PI*C.y/t.clientHeight)),x.copy(S),o.update()}function ce(e){A.set(e.clientX,e.clientY),j.subVectors(A,k),j.y>0?H(I()):j.y<0&&U(I()),k.copy(A),o.update()}function le(e){T.set(e.clientX,e.clientY),E.subVectors(T,w).multiplyScalar(o.panSpeed),B(E.x,E.y),w.copy(T),o.update()}function ue(e){W(e),e.deltaY<0?U(I()):e.deltaY>0&&H(I()),o.update()}function de(e){let t=!1;switch(e.code){case o.keys.UP:B(0,o.keyPanSpeed),t=!0;break;case o.keys.BOTTOM:B(0,-o.keyPanSpeed),t=!0;break;case o.keys.LEFT:B(o.keyPanSpeed,0),t=!0;break;case o.keys.RIGHT:B(-o.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),o.update())}function J(){if(P.length==1)x.set(P[0].pageX,P[0].pageY);else{let e=.5*(P[0].pageX+P[1].pageX),t=.5*(P[0].pageY+P[1].pageY);x.set(e,t)}}function fe(){if(P.length==1)w.set(P[0].pageX,P[0].pageY);else{let e=.5*(P[0].pageX+P[1].pageX),t=.5*(P[0].pageY+P[1].pageY);w.set(e,t)}}function pe(){let e=P[0].pageX-P[1].pageX,t=P[0].pageY-P[1].pageY,n=Math.sqrt(e*e+t*t);k.set(0,n)}function me(){o.enableZoom&&pe(),o.enablePan&&fe()}function he(){o.enableZoom&&pe(),o.enableRotate&&J()}function ge(e){if(P.length==1)S.set(e.pageX,e.pageY);else{let t=$(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);S.set(n,r)}C.subVectors(S,x).multiplyScalar(o.rotateSpeed);let t=o.domElement;t&&(L(2*Math.PI*C.x/t.clientHeight),R(2*Math.PI*C.y/t.clientHeight)),x.copy(S)}function _e(e){if(P.length==1)T.set(e.pageX,e.pageY);else{let t=$(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);T.set(n,r)}E.subVectors(T,w).multiplyScalar(o.panSpeed),B(E.x,E.y),w.copy(T)}function ve(e){let t=$(e),n=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(n*n+r*r);A.set(0,i),j.set(0,(A.y/k.y)**+o.zoomSpeed),H(j.y),k.copy(A)}function ye(e){o.enableZoom&&ve(e),o.enablePan&&_e(e)}function be(e){o.enableZoom&&ve(e),o.enableRotate&&ge(e)}function xe(e){var t,n;o.enabled!==!1&&(P.length===0&&((t=o.domElement)==null||t.ownerDocument.addEventListener(`pointermove`,Y),(n=o.domElement)==null||n.ownerDocument.addEventListener(`pointerup`,X)),Oe(e),e.pointerType===`touch`?Te(e):Se(e))}function Y(e){o.enabled!==!1&&(e.pointerType===`touch`?Ee(e):Ce(e))}function X(e){var t,n,r;ke(e),P.length===0&&((t=o.domElement)==null||t.releasePointerCapture(e.pointerId),(n=o.domElement)==null||n.ownerDocument.removeEventListener(`pointermove`,Y),(r=o.domElement)==null||r.ownerDocument.removeEventListener(`pointerup`,X)),o.dispatchEvent(u),h=m.NONE}function Se(e){let t;switch(e.button){case 0:t=o.mouseButtons.LEFT;break;case 1:t=o.mouseButtons.MIDDLE;break;case 2:t=o.mouseButtons.RIGHT;break;default:t=-1}switch(t){case d.DOLLY:if(o.enableZoom===!1)return;oe(e),h=m.DOLLY;break;case d.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(o.enablePan===!1)return;q(e),h=m.PAN}else{if(o.enableRotate===!1)return;K(e),h=m.ROTATE}break;case d.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(o.enableRotate===!1)return;K(e),h=m.ROTATE}else{if(o.enablePan===!1)return;q(e),h=m.PAN}break;default:h=m.NONE}h!==m.NONE&&o.dispatchEvent(l)}function Ce(e){if(o.enabled!==!1)switch(h){case m.ROTATE:if(o.enableRotate===!1)return;se(e);break;case m.DOLLY:if(o.enableZoom===!1)return;ce(e);break;case m.PAN:if(o.enablePan===!1)return;le(e);break}}function we(e){o.enabled===!1||o.enableZoom===!1||h!==m.NONE&&h!==m.ROTATE||(e.preventDefault(),o.dispatchEvent(l),ue(e),o.dispatchEvent(u))}function Z(e){o.enabled===!1||o.enablePan===!1||de(e)}function Te(e){switch(Q(e),P.length){case 1:switch(o.touches.ONE){case a.ROTATE:if(o.enableRotate===!1)return;J(),h=m.TOUCH_ROTATE;break;case a.PAN:if(o.enablePan===!1)return;fe(),h=m.TOUCH_PAN;break;default:h=m.NONE}break;case 2:switch(o.touches.TWO){case a.DOLLY_PAN:if(o.enableZoom===!1&&o.enablePan===!1)return;me(),h=m.TOUCH_DOLLY_PAN;break;case a.DOLLY_ROTATE:if(o.enableZoom===!1&&o.enableRotate===!1)return;he(),h=m.TOUCH_DOLLY_ROTATE;break;default:h=m.NONE}break;default:h=m.NONE}h!==m.NONE&&o.dispatchEvent(l)}function Ee(e){switch(Q(e),h){case m.TOUCH_ROTATE:if(o.enableRotate===!1)return;ge(e),o.update();break;case m.TOUCH_PAN:if(o.enablePan===!1)return;_e(e),o.update();break;case m.TOUCH_DOLLY_PAN:if(o.enableZoom===!1&&o.enablePan===!1)return;ye(e),o.update();break;case m.TOUCH_DOLLY_ROTATE:if(o.enableZoom===!1&&o.enableRotate===!1)return;be(e),o.update();break;default:h=m.NONE}}function De(e){o.enabled!==!1&&e.preventDefault()}function Oe(e){P.push(e)}function ke(e){delete F[e.pointerId];for(let t=0;t<P.length;t++)if(P[t].pointerId==e.pointerId){P.splice(t,1);return}}function Q(e){let t=F[e.pointerId];t===void 0&&(t=new r,F[e.pointerId]=t),t.set(e.pageX,e.pageY)}function $(e){let t=e.pointerId===P[0].pointerId?P[1]:P[0];return F[t.pointerId]}this.dollyIn=(e=I())=>{U(e),o.update()},this.dollyOut=(e=I())=>{H(e),o.update()},this.getScale=()=>y,this.setScale=e=>{V(e),o.update()},this.getZoomScale=()=>I(),t!==void 0&&this.connect(t),this.update()}},A=g.forwardRef(({makeDefault:e,camera:t,regress:n,domElement:r,enableDamping:i=!0,keyEvents:a=!1,onChange:o,onStart:c,onEnd:l,...u},d)=>{let f=h(e=>e.invalidate),p=h(e=>e.camera),_=h(e=>e.gl),v=h(e=>e.events),y=h(e=>e.setEvents),b=h(e=>e.set),x=h(e=>e.get),S=h(e=>e.performance),C=t||p,w=r||v.connected||_.domElement,T=g.useMemo(()=>new k(C),[C]);return s(()=>{T.enabled&&T.update()},-1),g.useEffect(()=>(a&&T.connect(a===!0?w:a),T.connect(w),()=>void T.dispose()),[a,w,n,T,f]),g.useEffect(()=>{let e=e=>{f(),n&&S.regress(),o&&o(e)},t=e=>{c&&c(e)},r=e=>{l&&l(e)};return T.addEventListener(`change`,e),T.addEventListener(`start`,t),T.addEventListener(`end`,r),()=>{T.removeEventListener(`start`,t),T.removeEventListener(`end`,r),T.removeEventListener(`change`,e)}},[o,c,l,T,f,y]),g.useEffect(()=>{if(e){let e=x().controls;return b({controls:T}),()=>b({controls:e})}},[e,T]),g.createElement(`primitive`,m({ref:d,object:T,enableDamping:i},u))});export{b as n,A as t};