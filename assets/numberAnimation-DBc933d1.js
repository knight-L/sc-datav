import{a as e,n as t,r as n,s as r,u as i}from"./index-CaqUB-UT.js";import{Gn as a,Kn as o,W as s,c,nn as l,rn as u,t as d,u as f}from"./extends-meVizUIi.js";import{$ as p,$n as m,$t as h,An as g,B as _,Bn as v,Bt as y,C as b,D as x,Dn as S,Gn as C,Hn as w,Ht as T,In as E,Jt as D,Kt as O,L as k,Ln as A,Lt as j,Mn as ee,Mt as te,N as ne,Nt as M,On as N,P,Pt as F,Qt as I,R as L,U as re,Un as R,Ut as z,Vt as B,Wn as V,Xn as H,Xt as U,Y as W,Yt as ie,Zt as ae,_ as oe,_n as se,_t as ce,an as le,b as ue,cr as de,dr as fe,en as pe,et as me,fn as he,hn as ge,jt as _e,kn as ve,kt as ye,lr as be,mn as xe,ot as Se,pn as Ce,pt as we,q as Te,qt as Ee,sn as De,tn as Oe,ur as ke,ut as Ae,v as je,wt as Me,x as Ne,yt as Pe,z as Fe,zn as Ie}from"./sc_outline-DKkS1JU4.js";var G=i(r()),Le=i(e()),Re=new o,ze=new o,Be=new o,Ve=new a;function He(e,t,n){let r=Re.setFromMatrixPosition(e.matrixWorld);r.project(t);let i=n.width/2,a=n.height/2;return[r.x*i+i,-(r.y*a)+a]}function Ue(e,t){let n=Re.setFromMatrixPosition(e.matrixWorld),r=ze.setFromMatrixPosition(t.matrixWorld),i=n.sub(r),a=t.getWorldDirection(Be);return i.angleTo(a)>Math.PI/2}function We(e,t,n,r){let i=Re.setFromMatrixPosition(e.matrixWorld),a=i.clone();a.project(t),Ve.set(a.x,a.y),n.setFromCamera(Ve,t);let o=n.intersectObjects(r,!0);if(o.length){let e=o[0].distance;return i.distanceTo(n.ray.origin)<e}return!0}function Ge(e,t){if(t instanceof l)return t.zoom;if(t instanceof u){let n=Re.setFromMatrixPosition(e.matrixWorld),r=ze.setFromMatrixPosition(t.matrixWorld),i=t.fov*Math.PI/180,a=n.distanceTo(r);return 1/(2*Math.tan(i/2)*a)}else return 1}function Ke(e,t,n){if(t instanceof u||t instanceof l){let r=Re.setFromMatrixPosition(e.matrixWorld),i=ze.setFromMatrixPosition(t.matrixWorld),a=r.distanceTo(i),o=(n[1]-n[0])/(t.far-t.near),s=n[1]-o*t.far;return Math.round(o*a+s)}}var qe=e=>Math.abs(e)<1e-10?0:e;function Je(e,t,n=``){let r=`matrix3d(`;for(let n=0;n!==16;n++)r+=qe(t[n]*e.elements[n])+(n===15?`)`:`,`);return n+r}var Ye=(e=>t=>Je(t,e))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Xe=(e=>(t,n)=>Je(t,e(n),`translate(-50%,-50%)`))(e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1]);function Ze(e){return e&&typeof e==`object`&&`current`in e}var Qe=G.forwardRef(({children:e,eps:t=.001,style:n,className:r,prepend:i,center:a,fullscreen:s,portal:l,distanceFactor:u,sprite:p=!1,transform:m=!1,occlude:h,onOcclude:g,castShadow:_,receiveShadow:v,material:y,geometry:b,zIndexRange:x=[16777271,0],calculatePosition:S=He,as:C=`div`,wrapperClass:w,pointerEvents:T=`auto`,...E},D)=>{let{gl:O,camera:k,scene:A,size:j,raycaster:ee,events:te,viewport:ne}=f(),[M]=G.useState(()=>document.createElement(C)),N=G.useRef(null),P=G.useRef(null),F=G.useRef(0),I=G.useRef([0,0]),L=G.useRef(null),re=G.useRef(null),R=l?.current||te.connected||O.domElement.parentNode,z=G.useRef(null),B=G.useRef(!1),V=G.useMemo(()=>h&&h!==`blending`||Array.isArray(h)&&h.length&&Ze(h[0]),[h]);G.useLayoutEffect(()=>{let e=O.domElement;h&&h===`blending`?(e.style.zIndex=`${Math.floor(x[0]/2)}`,e.style.position=`absolute`,e.style.pointerEvents=`none`):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)},[h]),G.useLayoutEffect(()=>{if(P.current){let e=N.current=Le.createRoot(M);if(A.updateMatrixWorld(),m)M.style.cssText=`position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;`;else{let e=S(P.current,k,j);M.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return R&&(i?R.prepend(M):R.appendChild(M)),()=>{R&&R.removeChild(M),e.unmount()}}},[R,m]),G.useLayoutEffect(()=>{w&&(M.className=w)},[w]);let H=G.useMemo(()=>m?{position:`absolute`,top:0,left:0,width:j.width,height:j.height,transformStyle:`preserve-3d`,pointerEvents:`none`}:{position:`absolute`,transform:a?`translate3d(-50%,-50%,0)`:`none`,...s&&{top:-j.height/2,left:-j.width/2,width:j.width,height:j.height},...n},[n,a,s,j,m]),U=G.useMemo(()=>({position:`absolute`,pointerEvents:T}),[T]);G.useLayoutEffect(()=>{if(B.current=!1,m){var t;(t=N.current)==null||t.render(G.createElement(`div`,{ref:L,style:H},G.createElement(`div`,{ref:re,style:U},G.createElement(`div`,{ref:D,className:r,style:n,children:e}))))}else{var i;(i=N.current)==null||i.render(G.createElement(`div`,{ref:D,style:H,className:r,children:e}))}});let W=G.useRef(!0);c(e=>{if(P.current){k.updateMatrixWorld(),P.current.updateWorldMatrix(!0,!1);let e=m?I.current:S(P.current,k,j);if(m||Math.abs(F.current-k.zoom)>t||Math.abs(I.current[0]-e[0])>t||Math.abs(I.current[1]-e[1])>t){let t=Ue(P.current,k),n=!1;V&&(Array.isArray(h)?n=h.map(e=>e.current):h!==`blending`&&(n=[A]));let r=W.current;n?W.current=We(P.current,k,ee,n)&&!t:W.current=!t,r!==W.current&&(g?g(!W.current):M.style.display=W.current?`block`:`none`);let i=Math.floor(x[0]/2),a=h?V?[x[0],i]:[i-1,0]:x;if(M.style.zIndex=`${Ke(P.current,k,a)}`,m){let[e,t]=[j.width/2,j.height/2],n=k.projectionMatrix.elements[5]*t,{isOrthographicCamera:r,top:i,left:a,bottom:o,right:s}=k,c=Ye(k.matrixWorldInverse),l=r?`scale(${n})translate(${qe(-(s+a)/2)}px,${qe((i+o)/2)}px)`:`translateZ(${n}px)`,d=P.current.matrixWorld;p&&(d=k.matrixWorldInverse.clone().transpose().copyPosition(d).scale(P.current.scale),d.elements[3]=d.elements[7]=d.elements[11]=0,d.elements[15]=1),M.style.width=j.width+`px`,M.style.height=j.height+`px`,M.style.perspective=r?``:`${n}px`,L.current&&re.current&&(L.current.style.transform=`${l}${c}translate(${e}px,${t}px)`,re.current.style.transform=Xe(d,1/((u||10)/400)))}else{let t=u===void 0?1:Ge(P.current,k)*u;M.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${t})`}I.current=e,F.current=k.zoom}}if(!V&&z.current&&!B.current)if(m){if(L.current){let e=L.current.children[0];if(e!=null&&e.clientWidth&&e!=null&&e.clientHeight){let{isOrthographicCamera:t}=k;if(t||b)E.scale&&(Array.isArray(E.scale)?E.scale instanceof o?z.current.scale.copy(E.scale.clone().divideScalar(1)):z.current.scale.set(1/E.scale[0],1/E.scale[1],1/E.scale[2]):z.current.scale.setScalar(1/E.scale));else{let t=(u||10)/400,n=e.clientWidth*t,r=e.clientHeight*t;z.current.scale.set(n,r,1)}B.current=!0}}}else{let t=M.children[0];if(t!=null&&t.clientWidth&&t!=null&&t.clientHeight){let e=1/ne.factor,n=t.clientWidth*e,r=t.clientHeight*e;z.current.scale.set(n,r,1),B.current=!0}z.current.lookAt(e.camera.position)}});let ie=G.useMemo(()=>({vertexShader:m?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[m]);return G.createElement(`group`,d({},E,{ref:P}),h&&!V&&G.createElement(`mesh`,{castShadow:_,receiveShadow:v,ref:z},b||G.createElement(`planeGeometry`,null),y||G.createElement(`shaderMaterial`,{side:2,vertexShader:ie.vertexShader,fragmentShader:ie.fragmentShader})))}),$e=Math.PI*2,K=pe.CMD,et=[`top`,`right`,`bottom`,`left`];function tt(e,t,n,r,i){var a=n.width,o=n.height;switch(e){case`top`:r.set(n.x+a/2,n.y-t),i.set(0,-1);break;case`bottom`:r.set(n.x+a/2,n.y+o+t),i.set(0,1);break;case`left`:r.set(n.x-t,n.y+o/2),i.set(-1,0);break;case`right`:r.set(n.x+a+t,n.y+o/2),i.set(1,0);break}}function nt(e,t,n,r,i,a,o,s,c){o-=e,s-=t;var l=Math.sqrt(o*o+s*s);o/=l,s/=l;var u=o*n+e,d=s*n+t;if(Math.abs(r-i)%$e<1e-4)return c[0]=u,c[1]=d,l-n;if(a){var f=r;r=h(i),i=h(f)}else r=h(r),i=h(i);r>i&&(i+=$e);var p=Math.atan2(s,o);if(p<0&&(p+=$e),p>=r&&p<=i||p+$e>=r&&p+$e<=i)return c[0]=u,c[1]=d,l-n;var m=n*Math.cos(r)+e,g=n*Math.sin(r)+t,_=n*Math.cos(i)+e,v=n*Math.sin(i)+t,y=(m-o)*(m-o)+(g-s)*(g-s),b=(_-o)*(_-o)+(v-s)*(v-s);return y<b?(c[0]=m,c[1]=g,Math.sqrt(y)):(c[0]=_,c[1]=v,Math.sqrt(b))}function rt(e,t,n,r,i,a,o,s){var c=i-e,l=a-t,u=n-e,d=r-t,f=Math.sqrt(u*u+d*d);u/=f,d/=f;var p=(c*u+l*d)/f;s&&(p=Math.min(Math.max(p,0),1)),p*=f;var m=o[0]=e+p*u,h=o[1]=t+p*d;return Math.sqrt((m-i)*(m-i)+(h-a)*(h-a))}function it(e,t,n,r,i,a,o){n<0&&(e+=n,n=-n),r<0&&(t+=r,r=-r);var s=e+n,c=t+r,l=o[0]=Math.min(Math.max(i,e),s),u=o[1]=Math.min(Math.max(a,t),c);return Math.sqrt((l-i)*(l-i)+(u-a)*(u-a))}var q=[];function at(e,t,n){var r=it(t.x,t.y,t.width,t.height,e.x,e.y,q);return n.set(q[0],q[1]),r}function ot(e,t,n){for(var r=0,i=0,a=0,o=0,s,c,l=1/0,u=t.data,d=e.x,f=e.y,p=0;p<u.length;){var m=u[p++];p===1&&(r=u[p],i=u[p+1],a=r,o=i);var h=l;switch(m){case K.M:a=u[p++],o=u[p++],r=a,i=o;break;case K.L:h=rt(r,i,u[p],u[p+1],d,f,q,!0),r=u[p++],i=u[p++];break;case K.C:h=S(r,i,u[p++],u[p++],u[p++],u[p++],u[p],u[p+1],d,f,q),r=u[p++],i=u[p++];break;case K.Q:h=N(r,i,u[p++],u[p++],u[p],u[p+1],d,f,q),r=u[p++],i=u[p++];break;case K.A:var g=u[p++],_=u[p++],v=u[p++],y=u[p++],b=u[p++],x=u[p++];p+=1;var C=!!(1-u[p++]);s=Math.cos(b)*v+g,c=Math.sin(b)*y+_,p<=1&&(a=s,o=c);var w=(d-g)*y/v+g;h=nt(g,_,y,b,b+x,C,w,f,q),r=Math.cos(b+x)*v+g,i=Math.sin(b+x)*y+_;break;case K.R:a=r=u[p++],o=i=u[p++];var T=u[p++],E=u[p++];h=it(a,o,T,E,d,f,q);break;case K.Z:h=rt(r,i,a,o,d,f,q,!0),r=a,i=o;break}h<l&&(l=h,n.set(q[0],q[1]))}return l}var J=new g,Y=new g,X=new g,Z=new g,Q=new g;function st(e,t){if(e){var n=e.getTextGuideLine(),r=e.getTextContent();if(r&&n){var i=e.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],o=i.candidates||et,s=r.getBoundingRect().clone();s.applyTransform(r.getComputedTransform());var c=1/0,l=i.anchor,u=e.getComputedTransform(),d=u&&ee([],u),f=t.get(`length2`)||0;l&&X.copy(l);for(var p=0;p<o.length;p++){var m=o[p];tt(m,0,s,J,Z),g.scaleAndAdd(Y,J,Z,f),Y.transform(d);var h=e.getBoundingRect(),_=l?l.distance(Y):e instanceof I?ot(Y,e.path,X):at(Y,h,X);_<c&&(c=_,Y.transform(u),X.transform(u),X.toArray(a[0]),Y.toArray(a[1]),J.toArray(a[2]))}lt(a,t.get(`minTurnAngle`)),n.setShape({points:a})}}}var ct=[],$=new g;function lt(e,t){if(t<=180&&t>0){t=t/180*Math.PI,J.fromArray(e[0]),Y.fromArray(e[1]),X.fromArray(e[2]),g.sub(Z,J,Y),g.sub(Q,X,Y);var n=Z.len(),r=Q.len();if(!(n<.001||r<.001)){Z.scale(1/n),Q.scale(1/r);var i=Z.dot(Q);if(Math.cos(t)<i){var a=rt(Y.x,Y.y,X.x,X.y,J.x,J.y,ct,!1);$.fromArray(ct),$.scaleAndAdd(Q,a/Math.tan(Math.PI-t));var o=X.x===Y.x?($.y-Y.y)/(X.y-Y.y):($.x-Y.x)/(X.x-Y.x);if(isNaN(o))return;o<0?g.copy($,Y):o>1&&g.copy($,X),$.toArray(e[1])}}}}function ut(e,t,n){if(n<=180&&n>0){n=n/180*Math.PI,J.fromArray(e[0]),Y.fromArray(e[1]),X.fromArray(e[2]),g.sub(Z,Y,J),g.sub(Q,X,Y);var r=Z.len(),i=Q.len();if(!(r<.001||i<.001)&&(Z.scale(1/r),Q.scale(1/i),Z.dot(t)<Math.cos(n))){var a=rt(Y.x,Y.y,X.x,X.y,J.x,J.y,ct,!1);$.fromArray(ct);var o=Math.PI/2,s=Math.acos(Q.dot(t)),c=o+s-n;if(c>=o)g.copy($,X);else{$.scaleAndAdd(Q,a/Math.tan(Math.PI/2-c));var l=X.x===Y.x?($.y-Y.y)/(X.y-Y.y):($.x-Y.x)/(X.x-Y.x);if(isNaN(l))return;l<0?g.copy($,Y):l>1&&g.copy($,X)}$.toArray(e[1])}}}function dt(e,t,n,r){var i=n===`normal`,a=i?e:e.ensureState(n);a.ignore=t;var o=r.get(`smooth`);o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=r.getModel(`lineStyle`).getLineStyle();i?e.useStyle(s):a.style=s}function ft(e,t){var n=t.smooth,r=t.points;if(r)if(e.moveTo(r[0][0],r[0][1]),n>0&&r.length>=3){var i=E(r[0],r[1]),a=E(r[1],r[2]);if(!i||!a){e.lineTo(r[1][0],r[1][1]),e.lineTo(r[2][0],r[2][1]);return}var o=Math.min(i,a)*n,s=A([],r[1],r[0],o/i),c=A([],r[1],r[2],o/a),l=A([],s,c,.5);e.bezierCurveTo(s[0],s[1],s[0],s[1],l[0],l[1]),e.bezierCurveTo(c[0],c[1],c[0],c[1],r[2][0],r[2][1])}else for(var u=1;u<r.length;u++)e.lineTo(r[u][0],r[u][1])}function pt(e,t,n){var r=e.getTextGuideLine(),i=e.getTextContent();if(!i){r&&e.removeTextGuideLine();return}for(var a=t.normal,o=a.get(`show`),s=i.ignore,c=0;c<T.length;c++){var l=T[c],u=t[l],d=l===`normal`;if(u){var f=u.get(`show`);if((d?s:be(i.states[l]&&i.states[l].ignore,s))||!be(f,o)){var p=d?r:r&&r.states[l];p&&(p.ignore=!0),r&&dt(r,!0,l,u);continue}r||(r=new j,e.setTextGuideLine(r),!d&&(s||!o)&&dt(r,!0,`normal`,t.normal),e.stateProxy&&(r.stateProxy=e.stateProxy)),dt(r,!1,l,u)}}if(r){R(r.style,n),r.style.fill=null;var m=a.get(`showAbove`),h=e.textGuideLineConfig=e.textGuideLineConfig||{};h.showAbove=m||!1,r.buildPath=ft}}function mt(e,t){t||=`labelLine`;for(var n={normal:e.getModel(t)},r=0;r<z.length;r++){var i=z[r];n[i]=e.getModel([i,t])}return n}var ht=Math.PI*2,gt=Math.PI/180;function _t(e,t,n){t.eachSeriesByType(e,function(e){var t=e.getData(),r=t.mapDimension(`value`),i=Se(e,n),a=i.cx,o=i.cy,s=i.r,c=i.r0,l=i.viewRect,u=-e.get(`startAngle`)*gt,d=e.get(`endAngle`),f=e.get(`padAngle`)*gt;d=d===`auto`?u-ht:-d*gt;var p=e.get(`minAngle`)*gt+f,m=0;t.each(r,function(e){!isNaN(e)&&m++});var h=t.getSum(r),g=Math.PI/(h||m)*2,_=e.get(`clockwise`),v=e.get(`roseType`),y=e.get(`stillShowZeroSum`),b=t.getDataExtent(r);b[0]=0;var x=_?1:-1,S=[u,d],C=x*f/2;Oe(S,!_),u=S[0],d=S[1];var w=vt(e);w.startAngle=u,w.endAngle=d,w.clockwise=_,w.cx=a,w.cy=o,w.r=s,w.r0=c;var T=Math.abs(d-u),E=T,D=0,O=u;if(t.setLayout({viewRect:l,r:s}),t.each(r,function(e,n){var r;if(isNaN(e)){t.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:_,cx:a,cy:o,r0:c,r:v?NaN:s});return}r=v===`area`?T/m:h===0&&y?g:e*g,r<p?(r=p,E-=p):D+=e;var i=O+x*r,l=0,u=0;f>r?(l=O+x*r/2,u=l):(l=O+C,u=i-C),t.setItemLayout(n,{angle:r,startAngle:l,endAngle:u,clockwise:_,cx:a,cy:o,r0:c,r:v?xe(e,b,[c,s]):s}),O=i}),E<ht&&m)if(E<=.001){var k=T/m;t.each(r,function(e,n){if(!isNaN(e)){var r=t.getItemLayout(n);r.angle=k;var i=0,a=0;k<f?(i=u+x*(n+1/2)*k,a=i):(i=u+x*n*k+C,a=u+x*(n+1)*k-C),r.startAngle=i,r.endAngle=a}})}else g=E/D,O=u,t.each(r,function(e,n){if(!isNaN(e)){var r=t.getItemLayout(n),i=r.angle===p?p:e*g,a=0,o=0;i<f?(a=O+x*i/2,o=a):(a=O+C,o=O+x*i-C),r.startAngle=a,r.endAngle=o,O+=x*i}})})}var vt=De();function yt(e){return{seriesType:e,reset:function(e,t){var n=t.findComponents({mainType:`legend`});if(!(!n||!n.length)){var r=e.getData();r.filterSelf(function(e){for(var t=r.getName(e),i=0;i<n.length;i++)if(!n[i].isSelected(t))return!1;return!0})}}}}var bt=Math.PI/180;function xt(e,t,n,r,i,a,o,s,c,l){if(e.length<2)return;function u(e){for(var a=e.rB,o=a*a,s=0;s<e.list.length;s++){var c=e.list[s],l=Math.abs(c.label.y-n),u=r+c.len,d=u*u,f=Math.sqrt(Math.abs((1-l*l/o)*d)),p=t+(f+c.len2)*i,m=p-c.label.x,h=c.targetTextWidth-m*i;Ct(c,h,!0),c.label.x=p}}function d(e){for(var a={list:[],maxY:0},o={list:[],maxY:0},s=0;s<e.length;s++)if(e[s].labelAlignTo===`none`){var c=e[s],l=c.label.y>n?o:a,d=Math.abs(c.label.y-n);if(d>=l.maxY){var f=c.label.x-t-c.len2*i,p=r+c.len;l.rB=Math.abs(f)<p?Math.sqrt(d*d/(1-f*f/p/p)):p,l.maxY=d}l.list.push(c)}u(a),u(o)}for(var f=e.length,p=0;p<f;p++)if(e[p].position===`outer`&&e[p].labelAlignTo===`labelLine`){var m=e[p].label.x-l;e[p].linePoints[1][0]+=m,e[p].label.x=l}x(e,1,c,c+o)&&d(e)}function St(e,t,n,r,i,a,o,s){for(var c=[],l=[],u=Number.MAX_VALUE,d=-Number.MAX_VALUE,f=0;f<e.length;f++){var p=e[f].label;Dt(e[f])||(p.x<t?(u=Math.min(u,p.x),c.push(e[f])):(d=Math.max(d,p.x),l.push(e[f])))}for(var f=0;f<e.length;f++){var m=e[f];if(!Dt(m)&&m.linePoints){if(m.labelStyleWidth!=null)continue;var p=m.label,h=m.linePoints,g=void 0;g=m.labelAlignTo===`edge`?p.x<t?h[2][0]-m.labelDistance-o-m.edgeDistance:o+i-m.edgeDistance-h[2][0]-m.labelDistance:m.labelAlignTo===`labelLine`?p.x<t?u-o-m.bleedMargin:o+i-d-m.bleedMargin:p.x<t?p.x-o-m.bleedMargin:o+i-p.x-m.bleedMargin,m.targetTextWidth=g,Ct(m,g,!1)}}xt(l,t,n,r,1,i,a,o,s,d),xt(c,t,n,r,-1,i,a,o,s,u);for(var f=0;f<e.length;f++){var m=e[f];if(!Dt(m)&&m.linePoints){var p=m.label,h=m.linePoints,_=m.labelAlignTo===`edge`,v=p.style.padding,y=v?v[1]+v[3]:0,b=p.style.backgroundColor?0:y,x=m.rect.width+b,S=h[1][0]-h[2][0];_?p.x<t?h[2][0]=o+m.edgeDistance+x+m.labelDistance:h[2][0]=o+i-m.edgeDistance-x-m.labelDistance:(p.x<t?h[2][0]=p.x+m.labelDistance:h[2][0]=p.x-m.labelDistance,h[1][0]=h[2][0]+S),h[1][1]=h[2][1]=p.y}}}function Ct(e,t,n){if(e.labelStyleWidth==null){var r=e.label,i=r.style,a=e.rect,o=i.backgroundColor,s=i.padding,c=s?s[1]+s[3]:0,l=i.overflow,u=a.width+(o?0:c);if(t<u||n){if(l&&l.match(`break`)){r.setStyle(`backgroundColor`,null),r.setStyle(`width`,t-c);var d=r.getBoundingRect();r.setStyle(`width`,Math.ceil(d.width)),r.setStyle(`backgroundColor`,o)}else{var f=t-c,p=t<u?f:n?f>e.unconstrainedWidth?null:f:null;r.setStyle(`width`,p)}wt(a,r)}}}function wt(e,t){Et.rect=e,b(Et,t,Tt)}var Tt={minMarginForce:[null,0,null,0],marginDefault:[1,0,1,0]},Et={};function Dt(e){return e.position===`center`}function Ot(e){var t=e.getData(),n=[],r,i,a=!1,o=(e.get(`minShowLabelAngle`)||0)*bt,s=t.getLayout(`viewRect`),c=t.getLayout(`r`),l=s.width,u=s.x,d=s.y,f=s.height;function p(e){e.ignore=!0}function h(e){if(!e.ignore)return!0;for(var t in e.states)if(e.states[t].ignore===!1)return!0;return!1}t.each(function(e){var s=t.getItemGraphicEl(e),d=s.shape,_=s.getTextContent(),v=s.getTextGuideLine(),y=t.getItemModel(e),b=y.getModel(`label`),x=b.get(`position`)||y.get([`emphasis`,`label`,`position`]),S=b.get(`distanceToLabelLine`),C=b.get(`alignTo`),w=ge(b.get(`edgeDistance`),l),T=b.get(`bleedMargin`);T??=Math.min(l,f)>200?10:2;var E=y.getModel(`labelLine`),D=E.get(`length`);D=ge(D,l);var O=E.get(`length2`);if(O=ge(O,l),Math.abs(d.endAngle-d.startAngle)<o){V(_.states,p),_.ignore=!0,v&&(V(v.states,p),v.ignore=!0);return}if(h(_)){var k=(d.startAngle+d.endAngle)/2,A=Math.cos(k),j=Math.sin(k),ee,te,ne,M;r=d.cx,i=d.cy;var N=x===`inside`||x===`inner`;if(x===`center`)ee=d.cx,te=d.cy,M=`center`;else{var P=(N?(d.r+d.r0)/2*A:d.r*A)+r,F=(N?(d.r+d.r0)/2*j:d.r*j)+i;if(ee=P+A*3,te=F+j*3,!N){var I=P+A*(D+c-d.r),L=F+j*(D+c-d.r),re=I+(A<0?-1:1)*O,R=L;ee=C===`edge`?A<0?u+w:u+l-w:re+(A<0?-S:S),te=R,ne=[[P,F],[I,L],[re,R]]}M=N?`center`:C===`edge`?A>0?`right`:`left`:A>0?`left`:`right`}var z=Math.PI,B=0,H=b.get(`rotate`);if(m(H))B=H*(z/180);else if(x===`center`)B=0;else if(H===`radial`||H===!0)B=A<0?-k+z:-k;else if(H===`tangential`&&x!==`outside`&&x!==`outer`){var U=Math.atan2(A,j);U<0&&(U=z*2+U),j>0&&(U=z+U),B=U-z}if(a=!!B,_.x=ee,_.y=te,_.rotation=B,_.setStyle({verticalAlign:`middle`}),N){_.setStyle({align:M});var W=_.states.select;W&&(W.x+=_.x,W.y+=_.y)}else{var ie=new ve(0,0,0,0);wt(ie,_),n.push({label:_,labelLine:v,position:x,len:D,len2:O,minTurnAngle:E.get(`minTurnAngle`),maxSurfaceAngle:E.get(`maxSurfaceAngle`),surfaceNormal:new g(A,j),linePoints:ne,textAlign:M,labelDistance:S,labelAlignTo:C,edgeDistance:w,bleedMargin:T,rect:ie,unconstrainedWidth:ie.width,labelStyleWidth:_.style.width})}s.setTextConfig({inside:N})}}),!a&&e.get(`avoidLabelOverlap`)&&St(n,r,i,c,l,f,u,d);for(var _=0;_<n.length;_++){var v=n[_],y=v.label,b=v.labelLine,x=isNaN(y.x)||isNaN(y.y);if(y){y.setStyle({align:v.textAlign}),x&&(V(y.states,p),y.ignore=!0);var S=y.states.select;S&&(S.x+=y.x,S.y+=y.y)}if(b){var C=v.linePoints;x||!C?(V(b.states,p),b.ignore=!0):(lt(C,v.minTurnAngle),ut(C,v.surfaceNormal,v.maxSurfaceAngle),b.setShape({points:C}),y.__hostTarget.textGuideLineConfig={anchor:new g(C[0][0],C[0][1])})}}}var kt=function(e){fe(t,e);function t(t,n,r){var i=e.call(this)||this;i.z2=2;var a=new ie;return i.setTextContent(a),i.updateData(t,n,r,!0),i}return t.prototype.updateData=function(e,t,n,r){var i=this,a=e.hostModel,o=e.getItemModel(t),s=o.getModel(`emphasis`),c=e.getItemLayout(t),l=C(oe(o.getModel(`itemStyle`),c,!0),c);if(isNaN(l.startAngle)){i.setShape(l);return}if(r){i.setShape(l);var u=a.getShallow(`animationType`);a.ecModel.ssr?(ye(i,{scaleX:0,scaleY:0},a,{dataIndex:t,isFrom:!0}),i.originX=l.cx,i.originY=l.cy):u===`scale`?(i.shape.r=c.r0,ye(i,{shape:{r:c.r}},a,t)):n==null?(i.shape.endAngle=c.startAngle,F(i,{shape:{endAngle:c.endAngle}},a,t)):(i.setShape({startAngle:n,endAngle:n}),ye(i,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},a,t))}else M(i),F(i,{shape:l},a,t);i.useStyle(e.getItemVisual(t,`style`)),O(i,o);var d=(c.startAngle+c.endAngle)/2,f=a.get(`selectedOffset`),p=Math.cos(d)*f,m=Math.sin(d)*f,h=o.getShallow(`cursor`);h&&i.attr(`cursor`,h),this._updateLabel(a,e,t),i.ensureState(`emphasis`).shape=C({r:c.r+(s.get(`scale`)&&s.get(`scaleSize`)||0)},oe(s.getModel(`itemStyle`),c)),C(i.ensureState(`select`),{x:p,y:m,shape:oe(o.getModel([`select`,`itemStyle`]),c)}),C(i.ensureState(`blur`),{shape:oe(o.getModel([`blur`,`itemStyle`]),c)});var g=i.getTextGuideLine(),_=i.getTextContent();g&&C(g.ensureState(`select`),{x:p,y:m}),C(_.ensureState(`select`),{x:p,y:m}),Ee(this,s.get(`focus`),s.get(`blurScope`),s.get(`disabled`))},t.prototype._updateLabel=function(e,t,n){var r=this,i=t.getItemModel(n),a=i.getModel(`labelLine`),o=t.getItemVisual(n,`style`),s=o&&o.fill,c=o&&o.opacity;Pe(r,ce(i),{labelFetcher:t.hostModel,labelDataIndex:n,inheritColor:s,defaultOpacity:c,defaultText:e.getFormattedLabel(n,`normal`)||t.getName(n)});var l=r.getTextContent();r.setTextConfig({position:null,rotation:null}),l.attr({z2:10});var u=i.get([`label`,`position`]);if(u!==`outside`&&u!==`outer`)r.removeTextGuideLine();else{var d=this.getTextGuideLine();d||(d=new j,this.setTextGuideLine(d)),pt(this,mt(i),{stroke:s,opacity:ke(a.get([`lineStyle`,`opacity`]),c,1)})}},t}(y),At=function(e){fe(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return t.prototype.render=function(e,t,n,r){var i=e.getData(),a=this._data,o=this.group,s;if(!a&&i.count()>0){for(var c=i.getItemLayout(0),l=1;isNaN(c&&c.startAngle)&&l<i.count();++l)c=i.getItemLayout(l);c&&(s=c.startAngle)}if(this._emptyCircleSector&&o.remove(this._emptyCircleSector),i.count()===0&&e.get(`showEmptyCircle`)){var u=vt(e),d=new y({shape:v(u)});d.useStyle(e.getModel(`emptyCircleStyle`).getItemStyle()),this._emptyCircleSector=d,o.add(d)}i.diff(a).add(function(e){var t=new kt(i,e,s);i.setItemGraphicEl(e,t),o.add(t)}).update(function(e,t){var n=a.getItemGraphicEl(t);n.updateData(i,e,s),n.off(`click`),o.add(n),i.setItemGraphicEl(e,n)}).remove(function(t){var n=a.getItemGraphicEl(t);te(n,e,t)}).execute(),Ot(e),e.get(`animationTypeUpdate`)!==`expansion`&&(this._data=i)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,t){var n=t.getData().getItemLayout(0);if(n){var r=e[0]-n.cx,i=e[1]-n.cy,a=Math.sqrt(r*r+i*i);return a<=n.r&&a>=n.r0}},t.type=`pie`,t}(Te);function jt(e,t,n){t=H(t)&&{coordDimensions:t}||C({encodeDefine:e.getEncode()},t);var r=e.getSource(),i=k(r,t).dimensions,a=new L(i,e);return a.initData(r,n),a}var Mt=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){return this._getRawData().indexOfName(e)>=0},e.prototype.indexOfName=function(e){return this._getDataWithEncodedVisual().indexOfName(e)},e.prototype.getItemVisual=function(e,t){return this._getDataWithEncodedVisual().getItemVisual(e,t)},e}(),Nt=De(),Pt=function(e){fe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new Mt(Ie(this.getData,this),Ie(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return jt(this,{coordDimensions:[`value`],encodeDefaulter:w(p,this)})},t.prototype.getDataParams=function(t){var n=this.getData(),r=Nt(n),i=r.seats;if(!i){var a=[];n.each(n.mapDimension(`value`),function(e){a.push(e)}),i=r.seats=he(a,n.hostModel.get(`percentPrecision`))}var o=e.prototype.getDataParams.call(this,t);return o.percent=i[t]||0,o.$vars.push(`percent`),o},t.prototype._defaultLabelLine=function(e){le(e,`labelLine`,[`show`]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.type=`series.pie`,t.defaultOption={z:2,legendHoverLink:!0,colorBy:`data`,center:[`50%`,`50%`],radius:[0,`50%`],clockwise:!0,startAngle:90,endAngle:`auto`,padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,coordinateSystemUsage:`box`,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:`truncate`,position:`outer`,alignTo:`none`,edgeDistance:`25%`,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:30,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:`solid`}},itemStyle:{borderWidth:1,borderJoin:`round`},showEmptyCircle:!0,emptyCircleStyle:{color:`lightgray`,opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:`expansion`,animationDuration:1e3,animationTypeUpdate:`transition`,animationEasingUpdate:`cubicInOut`,animationDurationUpdate:500,animationEasing:`cubicInOut`},t}(W);Ae({fullType:Pt.type,getCoord2:function(e){return e.getShallow(`center`)}});var Ft=Pt;function It(e){return{seriesType:e,reset:function(e,t){var n=e.getData();n.filterSelf(function(e){var t=n.mapDimension(`value`),r=n.get(t,e);return!(m(r)&&!isNaN(r)&&r<0)})}}}function Lt(e){e.registerChartView(At),e.registerSeriesModel(Ft),re(`pie`,e.registerAction),e.registerLayout(w(_t,`pie`)),e.registerProcessor(yt(`pie`)),e.registerProcessor(It(`pie`))}var Rt=[`itemStyle`,`borderWidth`],zt=[{xy:`x`,wh:`width`,index:0,posDesc:[`left`,`right`]},{xy:`y`,wh:`height`,index:1,posDesc:[`top`,`bottom`]}],Bt=new B,Vt=function(e){fe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(e,t,n){var r=this.group,i=e.getData(),a=this._data,o=e.coordinateSystem,s=o.getBaseAxis().isHorizontal(),c=o.master.getRect(),l={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:o,coordSysExtent:[[c.x,c.x+c.width],[c.y,c.y+c.height]],isHorizontal:s,valueDim:zt[+s],categoryDim:zt[1-s]};i.diff(a).add(function(e){if(i.hasValue(e)){var t=$t(i,e),n=Ht(i,e,t,l),a=nn(i,l,n);i.setItemGraphicEl(e,a),r.add(a),ln(a,l,n)}}).update(function(e,t){var n=a.getItemGraphicEl(t);if(!i.hasValue(e)){r.remove(n);return}var o=$t(i,e),s=Ht(i,e,o,l),c=on(i,s);n&&c!==n.__pictorialShapeStr&&(r.remove(n),i.setItemGraphicEl(e,null),n=null),n?rn(n,l,s):n=nn(i,l,s,!0),i.setItemGraphicEl(e,n),n.__pictorialSymbolMeta=s,r.add(n),ln(n,l,s)}).remove(function(e){var t=a.getItemGraphicEl(e);t&&an(a,e,t.__pictorialSymbolMeta.animationModel,t)}).execute();var u=e.get(`clip`,!0)?ue(e.coordinateSystem,!1,e):null;return u?r.setClipPath(u):r.removeClipPath(),this._data=i,this.group},t.prototype.remove=function(e,t){var n=this.group,r=this._data;e.get(`animation`)?r&&r.eachItemGraphicEl(function(t){an(r,D(t).dataIndex,e,t)}):n.removeAll()},t.type=`pictorialBar`,t}(Te);function Ht(e,t,n,r){var i=e.getItemLayout(t),a=n.get(`symbolRepeat`),o=n.get(`symbolClip`),s=n.get(`symbolPosition`)||`start`,c=(n.get(`symbolRotate`)||0)*Math.PI/180||0,l=n.get(`symbolPatternSize`)||2,u=n.isAnimationEnabled(),d={dataIndex:t,layout:i,itemModel:n,symbolType:e.getItemVisual(t,`symbol`)||`circle`,style:e.getItemVisual(t,`style`),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:n.get(`symbolRepeatDirection`),symbolPatternSize:l,rotation:c,animationModel:u?n:null,hoverScale:u&&n.get([`emphasis`,`scale`]),z2:n.getShallow(`z`,!0)||0};Ut(n,a,i,r,d),Gt(e,t,i,a,o,d.boundingLength,d.pxSign,l,r,d),Kt(n,d.symbolScale,c,r,d);var f=d.symbolSize,p=_(n.get(`symbolOffset`),f);return qt(n,f,i,a,o,p,s,d.valueLineWidth,d.boundingLength,d.repeatCutLength,r,d),d}function Ut(e,t,n,r,i){var a=r.valueDim,o=e.get(`symbolBoundingData`),s=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),c=s.toGlobalCoord(s.dataToCoord(0)),l=1-(n[a.wh]<=0),u;if(H(o)){var d=[Wt(s,o[0])-c,Wt(s,o[1])-c];d[1]<d[0]&&d.reverse(),u=d[l]}else u=o==null?t?r.coordSysExtent[a.index][l]-c:n[a.wh]:Wt(s,o)-c;i.boundingLength=u,t&&(i.repeatCutLength=n[a.wh]);var f=a.xy===`x`,p=s.inverse;i.pxSign=f&&!p||!f&&p?u>=0?1:-1:u>0?1:-1}function Wt(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function Gt(e,t,n,r,i,a,o,s,c,l){var u=c.valueDim,d=c.categoryDim,f=Math.abs(n[d.wh]),p=e.getItemVisual(t,`symbolSize`),m=H(p)?p.slice():p==null?[`100%`,`100%`]:[p,p];m[d.index]=ge(m[d.index],f),m[u.index]=ge(m[u.index],r?f:Math.abs(a)),l.symbolSize=m;var h=l.symbolScale=[m[0]/s,m[1]/s];h[u.index]*=(c.isHorizontal?-1:1)*o}function Kt(e,t,n,r,i){var a=e.get(Rt)||0;a&&(Bt.attr({scaleX:t[0],scaleY:t[1],rotation:n}),Bt.updateTransform(),a/=Bt.getLineScale(),a*=t[r.valueDim.index]),i.valueLineWidth=a||0}function qt(e,t,n,r,i,a,o,s,c,l,u,d){var f=u.categoryDim,p=u.valueDim,m=d.pxSign,h=Math.max(t[p.index]+s,0),g=h;if(r){var _=Math.abs(c),v=de(e.get(`symbolMargin`),`15%`)+``,y=!1;v.lastIndexOf(`!`)===v.length-1&&(y=!0,v=v.slice(0,v.length-1));var b=ge(v,t[p.index]),x=Math.max(h+b*2,0),S=y?0:b*2,w=Ce(r),T=w?r:un((_+S)/x);b=(_-T*h)/2/(y?T:Math.max(T-1,1)),x=h+b*2,S=y?0:b*2,!w&&r!==`fixed`&&(T=l?un((Math.abs(l)+S)/x):0),g=T*x-S,d.repeatTimes=T,d.symbolMargin=b}var E=m*(g/2),D=d.pathPosition=[];D[f.index]=n[f.wh]/2,D[p.index]=o===`start`?E:o===`end`?c-E:c/2,a&&(D[0]+=a[0],D[1]+=a[1]);var O=d.bundlePosition=[];O[f.index]=n[f.xy],O[p.index]=n[p.xy];var k=d.barRectShape=C({},n);k[p.wh]=m*Math.max(Math.abs(n[p.wh]),Math.abs(D[p.index]+E)),k[f.wh]=n[f.wh];var A=d.clipShape={};A[f.xy]=-n[f.xy],A[f.wh]=u.ecSize[f.wh],A[p.xy]=0,A[p.wh]=n[p.wh]}function Jt(e){var t=e.symbolPatternSize,n=Fe(e.symbolType,-t/2,-t/2,t,t);return n.attr({culling:!0}),n.type!==`image`&&n.setStyle({strokeNoScale:!0}),n}function Yt(e,t,n,r){var i=e.__pictorialBundle,a=n.symbolSize,o=n.valueLineWidth,s=n.pathPosition,c=t.valueDim,l=n.repeatTimes||0,u=0,d=a[t.valueDim.index]+o+n.symbolMargin*2;for(sn(e,function(e){e.__pictorialAnimationIndex=u,e.__pictorialRepeatTimes=l,u<l?cn(e,null,m(u),n,r):cn(e,null,{scaleX:0,scaleY:0},n,r,function(){i.remove(e)}),u++});u<l;u++){var f=Jt(n);f.__pictorialAnimationIndex=u,f.__pictorialRepeatTimes=l,i.add(f);var p=m(u);cn(f,{x:p.x,y:p.y,scaleX:0,scaleY:0},{scaleX:p.scaleX,scaleY:p.scaleY,rotation:p.rotation},n,r)}function m(e){var t=s.slice(),r=n.pxSign,i=e;return(n.symbolRepeatDirection===`start`?r>0:r<0)&&(i=l-1-e),t[c.index]=d*(i-l/2+.5)+s[c.index],{x:t[0],y:t[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function Xt(e,t,n,r){var i=e.__pictorialBundle,a=e.__pictorialMainPath;a?cn(a,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,r):(a=e.__pictorialMainPath=Jt(n),i.add(a),cn(a,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,r))}function Zt(e,t,n){var r=C({},t.barRectShape),i=e.__pictorialBarRect;i?cn(i,null,{shape:r},t,n):(i=e.__pictorialBarRect=new U({z2:2,shape:r,silent:!0,style:{stroke:`transparent`,fill:`transparent`,lineWidth:0}}),i.disableMorphing=!0,e.add(i))}function Qt(e,t,n,r){if(n.symbolClip){var i=e.__pictorialClipPath,a=C({},n.clipShape),o=t.valueDim,s=n.animationModel,c=n.dataIndex;if(i)F(i,{shape:a},s,c);else{a[o.wh]=0,i=new U({shape:a}),e.__pictorialBundle.setClipPath(i),e.__pictorialClipPath=i;var l={};l[o.wh]=n.clipShape[o.wh],Me[r?`updateProps`:`initProps`](i,{shape:l},s,c)}}}function $t(e,t){var n=e.getItemModel(t);return n.getAnimationDelayParams=en,n.isAnimationEnabled=tn,n}function en(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function tn(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow(`animation`)}function nn(e,t,n,r){var i=new se,a=new se;return i.add(a),i.__pictorialBundle=a,a.x=n.bundlePosition[0],a.y=n.bundlePosition[1],n.symbolRepeat?Yt(i,t,n):Xt(i,t,n),Zt(i,n,r),Qt(i,t,n,r),i.__pictorialShapeStr=on(e,n),i.__pictorialSymbolMeta=n,i}function rn(e,t,n){var r=n.animationModel,i=n.dataIndex,a=e.__pictorialBundle;F(a,{x:n.bundlePosition[0],y:n.bundlePosition[1]},r,i),n.symbolRepeat?Yt(e,t,n,!0):Xt(e,t,n,!0),Zt(e,n,!0),Qt(e,t,n,!0)}function an(e,t,n,r){var i=r.__pictorialBarRect;i&&i.removeTextContent();var a=[];sn(r,function(e){a.push(e)}),r.__pictorialMainPath&&a.push(r.__pictorialMainPath),r.__pictorialClipPath&&(n=null),V(a,function(e){_e(e,{scaleX:0,scaleY:0},n,t,function(){r.parent&&r.parent.remove(r)})}),e.setItemGraphicEl(t,null)}function on(e,t){return[e.getItemVisual(t.dataIndex,`symbol`)||`none`,!!t.symbolRepeat,!!t.symbolClip].join(`:`)}function sn(e,t,n){V(e.__pictorialBundle.children(),function(r){r!==e.__pictorialBarRect&&t.call(n,r)})}function cn(e,t,n,r,i,a){t&&e.attr(t),r.symbolClip&&!i?n&&e.attr(n):n&&Me[i?`updateProps`:`initProps`](e,n,r.animationModel,r.dataIndex,a)}function ln(e,t,n){var r=n.dataIndex,i=n.itemModel,a=i.getModel(`emphasis`),o=a.getModel(`itemStyle`).getItemStyle(),s=i.getModel([`blur`,`itemStyle`]).getItemStyle(),c=i.getModel([`select`,`itemStyle`]).getItemStyle(),l=i.getShallow(`cursor`),u=a.get(`focus`),d=a.get(`blurScope`),f=a.get(`scale`);sn(e,function(e){if(e instanceof ae){var t=e.style;e.useStyle(C({image:t.image,x:t.x,y:t.y,width:t.width,height:t.height},n.style))}else e.useStyle(n.style);var r=e.ensureState(`emphasis`);r.style=o,f&&(r.scaleX=e.scaleX*1.1,r.scaleY=e.scaleY*1.1),e.ensureState(`blur`).style=s,e.ensureState(`select`).style=c,l&&(e.cursor=l),e.z2=n.z2});var p=t.valueDim.posDesc[+(n.boundingLength>0)],m=e.__pictorialBarRect;m.ignoreClip=!0,Pe(m,ce(i),{labelFetcher:t.seriesModel,labelDataIndex:r,defaultText:Ne(t.seriesModel.getData(),r),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:p}),Ee(e,u,d,a.get(`disabled`))}function un(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}var dn=Vt,fn=function(e){fe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n.defaultSymbol=`roundRect`,n}return t.prototype.getInitialData=function(t){return t.stack=null,e.prototype.getInitialData.apply(this,arguments)},t.type=`series.pictorialBar`,t.dependencies=[`grid`],t.defaultOption=we(je.defaultOption,{symbol:`circle`,symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:`end`,symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:`-100%`,clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:me.color.primary}}}),t}(je);function pn(e){e.registerChartView(dn),e.registerSeriesModel(fn),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,w(P,`pictorialBar`)),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,ne(`pictorialBar`))}var mn=i(t());function hn(e){let{value:t,duration:r=2,delay:i,options:a,className:o,style:s}=e,c=(0,G.useRef)(0),l=(0,G.useRef)(null);return(0,G.useEffect)(()=>{let e,o=new IntersectionObserver(([o])=>{o.isIntersecting&&(e=n.to(c,{current:t,duration:r,delay:i,ease:`power1.out`,onUpdate(){l.current.innerHTML=c.current.toLocaleString(`zh-CN`,a)}}))},{threshold:.1});return o.observe(l.current),()=>{e?.kill(),o.disconnect()}},[t,r,i,a]),(0,mn.jsx)(`div`,{ref:l,className:o,style:s,children:`0`})}export{jt as a,pt as c,Mt as i,st as l,pn as n,yt as o,Lt as r,mt as s,hn as t,Qe as u};